<DataPipeModel name="SPEED_TEST_LOG_PARSER" sparkMasterHost="" batchSampling="true" checkpoint="" batchDuration="P1M" useHive="auto" streamingAutoStart="false" durableStreaming="false" useStreaming="auto" is_init="false" editBy="flow" description="">
  <HiveConfig>
    <Properties>
      <Property value="" name="hive.warehouse.hdfs.source"/>
      <Property value="" name="hive.metastore.data.source"/>
      <Property value="" name="hive.server2.thrift.port"/>
      <Property value="" name="hive.db.schema"/>
    </Properties>
  </HiveConfig>
  <ModelInfo validated="true">
    <Pipes>
      <Pipe name="(main)" uuid="" index="1000"/>
    </Pipes>
    <Flows>
      <Flow showFooter="true" name="Main" revision="1850" isNested="false" uuid="Main" index="1000">
        <Node height="95" width="130" y="80" x="40" label="Source" type="subflow" uuid="2de76d39-43d2-45a3-8e28-06a02e3272a7" index="1001">
          <Output dataType="String" outputType="DStream" uid="0" name="Out">
            <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Output dataType="(String,String)" outputType="DStream" uid="1" name="OutFileName">
            <Field isOptional="false" isArray="false" clazz="" type="string" label="file" name="file"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="data" name="data"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Model>
            <Properties>{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/FileSource&quot;,&quot;stopBatchCount&quot;:0,&quot;fsource_source_group&quot;:&quot;&quot;,&quot;fsource&quot;:&quot;&quot;,&quot;vtimezone&quot;:&quot;Etc/GMT&quot;,&quot;url&quot;:&quot;&quot;,&quot;filter&quot;:&quot;${fileFilter}(speedtest_log)&quot;,&quot;maxBatchSize&quot;:&quot;0&quot;,&quot;startOffset&quot;:-10,&quot;sample&quot;:&quot;TIME,env,mac_addr,status,host,upload_speed,download_speed,cmts,prov_speed,ip_addr,node\n1568385022.75301,,5CEA1DD0E226,complete,chrcnc-devicemgmt-app,11790597,240447827,,,,\n1568385007.56814,,485F99E9738A,failed,chrcnc-devicemgmt-app,,,,,,\n1568385004.68182,,90324BD0995D,complete,chrcnc-devicemgmt-app,4538238,36250816,,,,\n1568385002.38891,,485F99DCE078,complete,chrcnc-devicemgmt-app,22640161,497182989,,,,&quot;,&quot;enableAudit&quot;:&quot;true&quot;,&quot;auditUrl&quot;:&quot;viaops_ingestion_auditlog&quot;}</Properties>
            <__subflow__>
              <Flow showFooter="true" name="FileSource" referenceURI="remote:///viaops.ingestion/FileSource" acceptedSourceTypes="RDD,DStream,DataFrame" revision="5816" isNested="true" uuid="FileSource" index="1001">
                <Node height="75" width="130" y="60" x="492" label="Transform" type="Adhoc" uuid="a30c6cac-828b-4812-86c7-7e31ca6c1b02" index="1001_1">
                  <Source dataType="(String,String)" outputType="DStream" uid="0" name="source1">
                    <DataSource nodeId="29887fd0-bfb2-40c6-8ee2-485810cd70bc" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="file" name="file"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output referenceType="string" dataType="String" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[val retval = source1.map { case (name, data) =>
            data
        }]]></Script>
                  </Model>
                </Node>
                <Node height="40" width="70" y="80" x="733" label="Out" type="outPort" uuid="0aabd66a-c275-4691-8a6e-153b22beb785" index="1001_2">
                  <Source dataType="String" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="a30c6cac-828b-4812-86c7-7e31ca6c1b02" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Model>
                    <Properties>
{}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="160" x="700" label="Normalize" type="Compute" uuid="9557aa47-7ea3-4193-8cfa-97199d1e4c82" index="1001_3">
                  <Source dataType="class:Metric" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="2b85201b-32aa-4fed-87e6-bf67fe4c54c9" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metricName" name="metricName"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metricValue" name="metricValue"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metricUom" name="metricUom"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uomLabel" name="uomLabel"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model udfs="generate_datekey" isClassRef="true" _caseClass="viaops.ingestion.AuditLog">
                    <Computes>
                      <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${vtimezone}&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time()) / 1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="to_option(-1)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_name" outputType="string" value="metricName" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_value" outputType="string" value="metricValue" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_uom" outputType="string" value="metricUom" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="uom_label" outputType="string" value="uomLabel" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${fsource_source_group}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="system_tm" outputType="long" value="unix_timestamp_millisec(now()) / 1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="process_type" outputType="string" value="if(${stopBatchCount} &gt; 0, &quot;Ad-Hoc&quot;, &quot;Realtime&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_type" outputType="string" value="&quot;source&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_fmt" outputType="string" value="&quot;others&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_tz" outputType="string" value="&quot;${vtimezone}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_key" outputType="string" value="&quot;source_group&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_value" outputType="string" value="&quot;${fsource_source_group}&quot;" arg="" field="*" op="sleText"/>
                    </Computes>
                    <CheckboxStatus isChecked="false"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="160" x="490" label="Metrics" type="Adhoc" uuid="2b85201b-32aa-4fed-87e6-bf67fe4c54c9" index="1001_4">
                  <Source referenceType="FileInfo" dataType="(String,String)" outputType="DStream" uid="0" name="source1">
                    <DataSource nodeId="29887fd0-bfb2-40c6-8ee2-485810cd70bc" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="file" name="file"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output referenceType="Metric" dataType="class:Metric" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metricName" name="metricName"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metricValue" name="metricValue"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metricUom" name="metricUom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uomLabel" name="uomLabel"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[import scala.collection.immutable.HashSet
                val retval = source1.transform { rdd =>
                    val seq = if (${enableAudit}) {
                        val (set, cnt) = rdd.map { case(name, data) =>
                            (HashSet(name), 1L)
                        }.fold((HashSet(), 0L)) { (a, b) =>
                            (a._1 ++ b._1, a._2 + b._2)
                        }
                        val files = set.mkString(",")
                        if(cnt > 0) {
                            Seq(
                                Metric("Total Input Lines", cnt.toString, "sum", "Count"),
                                Metric("Files", files, "list", "List")
                            )
                        } else {
                            Seq()
                        }
                    } else {
                        Seq()
                    }
                    rdd.sparkContext.parallelize(seq, 1)
                }            ]]></Script>
                  </Model>
                </Node>
                <Node height="75" width="130" y="60" x="220" label="File Source" type="Adhoc" uuid="29887fd0-bfb2-40c6-8ee2-485810cd70bc" index="1001_5">
                  <Source dataType="String" outputType="DStream" uid="0" name="source1">
                    <DataSource nodeId="67d00967-c0b2-4b14-8721-9f003aee65ba" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output referenceType="FileInfo" dataType="(String,String)" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="file" name="file"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[import org.apache.spark.streaming.dstream.FileSourceSettings
import org.apache.hadoop.fs.Path
import org.apache.hadoop.fs.FileStatus

val settings = new FileSourceSettings
val maxBatchSize =  ${maxBatchSize} * 1024L * 1024

settings.setMaxTotalFileSizePerBatch(maxBatchSize)
settings.setAlwaysStartedFromSpecifiedPosition(false)
settings.setInitialOffset("time")

if(${stopBatchCount} == 0){
    settings.enableState(true)
    settings.setStateFolder("${__flowIndex__}")
    var offset = (${startOffset} * 60 * 1000).toLong
    settings.setStateOffset(offset)
}


val sdf = new java.text.SimpleDateFormat("yyyy-MM-dd")

val startTime = if ("${startDate}" == "" || "${startDate}".contains("startDate")) {
    System.currentTimeMillis
} else if("${startDate}".contains("now")) {
    System.currentTimeMillis
} else {
    sdf.parse("${startDate}").getTime
}
settings.setStartTime(startTime)
val endTime = if ("${endDate}" == "" || "${endDate}".contains("endDate")) {
    -1L
} else if("${endDate}".contains("now")) {
    System.currentTimeMillis
} else {
    sdf.parse("${endDate}").getTime
}
settings.setEndTime(endTime)
val urls = "${url}".split(",").toSeq
val retval = TextStreamBuild.textFileStream(ssc, urls,"${filter}", settings, null, enrichFunc = Option((st : Map[String, FileStatus], filename : String) => filename)).filter(line => !line._2.isEmpty())]]></Script>
                    <shellScript><![CDATA[{"global":"","custom_func":"    import com.vitria.spark.streaming.api.scala.source.SourceUtil._\n    import com.vitria.spark.streaming.api.scala.source.NameFilter\n    import org.apache.spark.sql.functions.input_file_name\n    import org.apache.hadoop.fs.{FileSystem, Path}\n    \n    val endMarkerToken__4001: String = \"_VTEND_\"\n    val endMakerRDD__4001 = sc.makeRDD(Array((endMarkerToken__4001, endMarkerToken__4001)), 1)\n    //val accum = sc.accumulator(0, \"End Accumulator\")\n    def _endMarkerFilter__4001(source1: DStream[(String, String)]): DStream[(String, String)] = {\n        val retval = source1.filter { case(file, data) => \n            data.contains(\"_VTEND_\") == false\n        }\n        retval\n    }\n    // Simulate Stream... use full package name for Queue to avoid potential conflict with java.util.Queue\n    var data: Array[String] = Array[String]()\n    var rs: Array[(String, String)] = Array[(String, String)]()\n    var rdd: RDD[(String, String)] = null\n    \n    val urls = \"${url}\".split(\",\")\n    val startDate = \"${startDate}\"\n    val endDate = \"${endDate}\"\n    val filter = \"${filter}\"\n    \n    val sdf = new java.text.SimpleDateFormat(\"yyyy-MM-dd\")\n    \n    val startTime = if (\"${startDate}\" == \"\" || \"${startDate}\".contains(\"startDate\")) {\n        0L\n    } else if(\"${startDate}\".contains(\"now\")) {\n        System.currentTimeMillis\n    } else {\n        sdf.parse(\"${startDate}\").getTime\n    }\n    val endTime = if (\"${endDate}\" == \"\" || \"${endDate}\".contains(\"endDate\")) {\n        -1L\n    } else if(\"${endDate}\".contains(\"now\")) {\n        System.currentTimeMillis\n    } else {\n        sdf.parse(\"${endDate}\").getTime\n    }    \n    \n    val filePattern = filter.r\n    val limit = 1024L * 1024 * 2\n    var size = 0L    \n    rdd = sc.union(urls.map(new Path(_)).flatMap { url =>\n      FileSystem.get(url.toUri, sc.hadoopConfiguration).listStatus(url).filter { status =>\n        if (status.isDirectory)\n          false\n        else if (status.getModificationTime < startTime)\n          false\n        else if (status.getModificationTime > endTime && endTime > 0)\n          false\n        else {\n          val name = status.getPath.getName\n          if (name.startsWith(\".\") || name.startsWith(\"_\"))\n            false\n          else if (filePattern.findFirstIn(name) == None)\n            false\n          else\n            true\n        }\n      }\n    }.sortBy(_.getModificationTime).filter { status =>\n      val before = size\n      size += status.getLen\n      before == 0 || size < limit\n    }.map { status =>\n      val path = status.getPath.toString\n      sc.textFile(path).filter(!_.isEmpty).map((path, _))\n    })\n    rs = rdd.take(10)\n    data = rs.map {case(file, data) => \n        data\n    }\n    if (data.length == 0) {\n        data = \"${sample}\".split(\"\\\\n\").map(_.trim)\n    }\n    \n    if (rs.length == 0) {\n      rs = data.map { x => {\n        val line = x.trim()\n        if (!line.startsWith(\"(\")) {\n          (\"N/A\", x)\n        } else {\n          val tmp = line.substring(line.indexOf(\"(\") + 1, line.indexOf(\")\"))\n          (tmp.substring(0, tmp.indexOf(\",\")), tmp.substring(tmp.indexOf(\",\") + 1))\n        }\n      }\n      }\n    }\n\n    val queue = scala.collection.mutable.Queue(sc.parallelize(rs))\n\n    val textSource = QueueStreamBuild.queueStream(ssc, queue, true, endMakerRDD__4001)\n    textSource.foreachRDD(rdd => {\n      rdd.foreach{ case(file, data) =>\n        if (data == \"_VTEND_\") {\n          accum += 1\n        }\n      }\n    })\n    val retval = _endMarkerFilter__4001(textSource)    "}]]></shellScript>
                  </Model>
                </Node>
                <Node height="75" width="130" y="160" x="920" label="FileAuditLog" type="subflow" uuid="e2b231bc-52ff-4d33-8235-8424774dfd0f" index="1001_6">
                  <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="In">
                    <DataSource nodeId="9557aa47-7ea3-4193-8cfa-97199d1e4c82" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                      <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/AuditLog&quot;,&quot;audit_parquetfolder&quot;:&quot;${auditUrl}&quot;,&quot;source&quot;:&quot;${fsource}&quot;}
</Properties>
                    <__subflow__>
                      <Flow showFooter="true" name="AuditLog" referenceURI="remote:///viaops.ingestion/AuditLog" acceptedSourceTypes="RDD,DStream,DataFrame" revision="800" isNested="true" uuid="AuditLog" index="1001_6">
                        <Node height="40" width="70" y="34" x="20" label="In" type="inPort" uuid="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" index="1001_6_1">
                          <Output referenceType="viaops.ingestion.AuditLog" dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model>
                            <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="40" width="70" y="34" x="440" label="Out" type="outPort" uuid="2a748b73-8ff7-4d04-8666-9123dfba32f3" index="1001_6_2">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Model>
                            <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="140" label="Normalize" type="Compute" uuid="322e4e59-dd18-4247-8532-ecf44de32e0b" index="1001_6_3">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model isClassRef="true" _caseClass="AuditLogTable">
                            <Computes>
                              <Compute wordWarp="true" alias="date_key" outputType="long" value="date_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="aggr_start_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="aggr_end_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_name" outputType="string" value="metric_name" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_value" outputType="string" value="metric_value" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_uom" outputType="string" value="metric_uom" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="uom_label" outputType="string" value="uom_label" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group" outputType="string" value="source_group" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="system_tm" outputType="long" value="system_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="process_type" outputType="string" value="process_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_type" outputType="string" value="aggr_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_fmt" outputType="string" value="source_fmt" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_tz" outputType="string" value="source_tz" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${source}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_key" outputType="string" value="ts_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_value" outputType="string" value="ts_value" arg="" field="*" op="sleText"/>
                            </Computes>
                            <CheckboxStatus isChecked="false"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="340" label="Step 1" type="StreamTarget" uuid="15ea36d5-561f-4969-8443-62afe82d4154" index="1001_6_4">
                          <Source dataType="class:AuditLogTable" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="322e4e59-dd18-4247-8532-ecf44de32e0b" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0,7" partitionColumn="date_key,source_group" partitionSize="" partitionType="eventField" tableName="${audit_parquetfolder}" type="hiveTable">
                            <__binding__><![CDATA[{"snapshotTableName":""}]]></__binding__>
                          </Model>
                        </Node>
                        <Link tgtPort="in:0" tgtId="322e4e59-dd18-4247-8532-ecf44de32e0b" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="2a748b73-8ff7-4d04-8666-9123dfba32f3" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="15ea36d5-561f-4969-8443-62afe82d4154" srcPort="out:0" srcId="322e4e59-dd18-4247-8532-ecf44de32e0b"/>
                        <Codes/>
                        <Libraries/>
                        <Resources/>
                        <Properties>[{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;audit_parquetfolder&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${auditUrl}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${fsource}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
                        <Types>[{&quot;name&quot;:&quot;AuditLogTable&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;date_key&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_start_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_end_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:true,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_uom&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;uom_label&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;system_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;process_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_fmt&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_tz&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group_prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_key&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
                      </Flow>
                    </__subflow__>
                    <__binding__><![CDATA[{"source":""}]]></__binding__>
                  </Model>
                </Node>
                <Node height="75" width="130" y="60" x="31" label="Auto Stop" type="Adhoc" uuid="67d00967-c0b2-4b14-8721-9f003aee65ba" index="1001_7">
                  <Output referenceType="string" dataType="String" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[var cnt = 0
        val total = ${stopBatchCount}
        val dummy = new org.apache.spark.streaming.dstream.VTDummyDStream(ssc)
        dummy.foreachRDD{(rdd, time) => 
            if (total > 0 && cnt >= total) {
                logger.warn("Stopping ADF model call started")
                com.vitria.spark.api.scala.SparkAppExceptionHanlders.stopProject()
                logger.warn("Stopping ADF model call finished")
            } else {
                cnt = cnt + 1
            }
        }
        val retval: DStream[String] = null]]></Script>
                    <shellScript><![CDATA[{"custom_func":"    val retval = ssc.queueStream(scala.collection.mutable.Queue(sc.emptyRDD[String]))"}]]></shellScript>
                  </Model>
                </Node>
                <Node height="40" width="100.6875" y="20" x="732" label="OutFileName" type="outPort" uuid="3851fd83-fa56-4af0-8dfe-d49fbd53f395" index="1001_8">
                  <Source dataType="(String,String)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="29887fd0-bfb2-40c6-8ee2-485810cd70bc" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="file" name="file"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Model>
                    <Properties>
{}
</Properties>
                  </Model>
                </Node>
                <Link tgtPort="din:0" tgtId="2b85201b-32aa-4fed-87e6-bf67fe4c54c9" srcPort="dout:0" srcId="29887fd0-bfb2-40c6-8ee2-485810cd70bc"/>
                <Link tgtPort="din:0" tgtId="29887fd0-bfb2-40c6-8ee2-485810cd70bc" srcPort="dout:0" srcId="67d00967-c0b2-4b14-8721-9f003aee65ba"/>
                <Link tgtPort="in:0" tgtId="3851fd83-fa56-4af0-8dfe-d49fbd53f395" srcPort="dout:0" srcId="29887fd0-bfb2-40c6-8ee2-485810cd70bc"/>
                <Link tgtPort="din:0" tgtId="e2b231bc-52ff-4d33-8235-8424774dfd0f" srcPort="out:0" srcId="9557aa47-7ea3-4193-8cfa-97199d1e4c82"/>
                <Link tgtPort="in:0" tgtId="9557aa47-7ea3-4193-8cfa-97199d1e4c82" srcPort="dout:0" srcId="2b85201b-32aa-4fed-87e6-bf67fe4c54c9"/>
                <Link tgtPort="in:0" tgtId="0aabd66a-c275-4691-8a6e-153b22beb785" srcPort="dout:0" srcId="a30c6cac-828b-4812-86c7-7e31ca6c1b02"/>
                <Link tgtPort="din:0" tgtId="a30c6cac-828b-4812-86c7-7e31ca6c1b02" srcPort="dout:0" srcId="29887fd0-bfb2-40c6-8ee2-485810cd70bc"/>
                <Codes/>
                <Libraries>
                  <Lib systemPath="${VTBA_HOME}/wildfly/bin/client/jboss-client.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/spark/library/vitria-spark-library.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/com/vitria/vtlibs/main/vtclient.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/com/vitria/vtlibs/main/vtfc.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/com/vitria/vtlibs/main/vtclusterservice.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/system/layers/base/org/hornetq/main/hornetq-core-client-2.4.7.Final.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/system/layers/base/org/hornetq/main/hornetq-jms-client-2.4.7.Final.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/system/layers/base/org/hornetq/main/hornetq-commons-2.4.7.Final.jar" scope="system"/>
                  <Lib systemPath="${VTBA_HOME}/wildfly/modules/com/vitria/thirdparty/xmlbeans/main/xmlbeans-2.3.0.jar" scope="system"/>
                </Libraries>
                <Resources/>
                <Properties>[{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;stopBatchCount&quot;,&quot;label&quot;:&quot;Stop After n Microbatch&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:0,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;fsource_source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;desc&quot;:&quot;Source Group of Metrics&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;fsource&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;desc&quot;:&quot;The source name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;vtimezone&quot;,&quot;label&quot;:&quot;Time Zone&quot;,&quot;desc&quot;:&quot;The timezone to calculate date&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Etc/GMT&quot;,&quot;defaultValueForExisted&quot;:&quot;Europe/London&quot;,&quot;enumSource&quot;:&quot;rest:/global/?op=get.timezones&quot;,&quot;runtimeControl&quot;:false},{&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;url&quot;,&quot;label&quot;:&quot;File URL&quot;,&quot;desc&quot;:&quot;The File URL to monitor. It can be directories list delimited by comma&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;filter&quot;,&quot;label&quot;:&quot;File Filter&quot;,&quot;desc&quot;:&quot;The file filter regular expression&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;.*&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;maxBatchSize&quot;,&quot;label&quot;:&quot;Max Batch Size (MB)&quot;,&quot;desc&quot;:&quot;The max file size which will be processed in one batch&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;0&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;date&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;startDate&quot;,&quot;label&quot;:&quot;Start Date&quot;,&quot;desc&quot;:&quot;The start date constraint and empty means starting from oldest&quot;,&quot;type&quot;:&quot;date&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;constraints&quot;:{&quot;itemStyle&quot;:&quot;width: 200px;&quot;,&quot;supportNow&quot;:true,&quot;supportClear&quot;:&quot;true&quot;},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;date&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;endDate&quot;,&quot;label&quot;:&quot;End Date&quot;,&quot;desc&quot;:&quot;End date constraint and empty means always process to latest time&quot;,&quot;type&quot;:&quot;date&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;constraints&quot;:{&quot;itemStyle&quot;:&quot;width: 200px;&quot;,&quot;supportNow&quot;:true,&quot;supportClear&quot;:&quot;true&quot;},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;startOffset&quot;,&quot;label&quot;:&quot;Start Offset (Minutes)&quot;,&quot;type&quot;:&quot;long&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:-10,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;sourceSample&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;sample&quot;,&quot;label&quot;:&quot;Sample Data&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;constraints&quot;:{&quot;type&quot;:&quot;sourceSample&quot;,&quot;args&quot;:{&quot;rows&quot;:&quot;4&quot;,&quot;itemStyle&quot;:&quot;height: auto;width: calc(100% - 54px);&quot;},&quot;impactSchema&quot;:true},&quot;excluded&quot;:true,&quot;runtimeControl&quot;:false,&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Source&quot;},{&quot;editorType&quot;:&quot;boolean&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group1&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;enableAudit&quot;,&quot;label&quot;:&quot;Audit Log&quot;,&quot;desc&quot;:&quot;A flag to control whether enable audit log&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;true&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group1&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;auditUrl&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;desc&quot;:&quot;The audit table name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
                <Types>[{&quot;name&quot;:&quot;Metric&quot;,&quot;namespace&quot;:&quot;&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;metricName&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metricValue&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metricUom&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;uomLabel&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]},{&quot;name&quot;:&quot;FileInfo&quot;,&quot;namespace&quot;:&quot;&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;file&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;data&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
              </Flow>
            </__subflow__>
            <__binding__><![CDATA[{"stopBatchCount":"stop_after_batch","fsource_source_group":"source_group","vtimezone":"time_zone","url":"file_url","filter":"file_filter","maxBatchSize":"max_batch_size","startDate":"start_date","endDate":"end_date","enableAudit":"enableAudit","auditUrl":"auditUrl","fsource":"source_group_prefix"}]]></__binding__>
          </Model>
        </Node>
        <Node height="95" width="130" y="80" x="240" label="Parse" type="Parse" uuid="e868221a-6f4c-4cb2-8e22-64d2766f9dee" index="1002">
          <Source dataType="String" outputType="DStream" uid="0" name="source">
            <DataSource nodeId="2de76d39-43d2-45a3-8e28-06a02e3272a7" name="Out" id="undefined" category="#OUTPUT">
              <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
            </DataSource>
          </Source>
          <Output dataType="class:InputData" outputType="DStream" uid="0" name="Out1">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="TIME" name="TIME"/>
            <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Env" name="env"/>
            <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Mac_addr" name="mac_addr"/>
            <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
            <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
            <Field isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Upload_speed" name="upload_speed"/>
            <Field isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Download_speed" name="download_speed"/>
            <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Cmts" name="cmts"/>
            <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
            <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
            <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Node" name="node"/>
          </Output>
          <Output dataType="(String,String)" outputType="DStream" uid="1" name="Dropped">
            <Field isOptional="false" isArray="false" type="string" label="error" name="___error___"/>
            <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Model daylight="false" timezone="Etc/UTC" header="metaname, TimeStamp,call attempts total, call currently connected,call fail,call success,emg call connected,emg call connecting,call on switch total,call on switch success,call on switch connected,call on switch fail,call from trunk total,call from trunk connected,call from trunk success,call from trunk fail,device unavailable switch fail, device unavailable trunk fail,no circuit switch,no circuit trunk,switch congestion fail,trunk route fail,trunk congestion fail,switch resource fail, trunk resource fail, switch media fail, trunk media fail, trunk sig fail, switch sig fail, switch other fail, trunk other fail, totalbglines, total lines, total mlhg pilot, total madn, total pbx no, total acd super bg, total prem acd, total basic acd, site name" dropEvent="true" addable="true" fromHeader="true" isClassRef="false" caseClass="InputData" delimiterType="csv" format="csv">
            <Schema>
              <Field excluded="false" initName="TIME" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="TIME" name="TIME"/>
              <Field excluded="false" initName="env" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Env" name="env"/>
              <Field excluded="false" initName="mac_addr" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Mac_addr" name="mac_addr"/>
              <Field excluded="false" initName="status" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
              <Field excluded="false" initName="host" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
              <Field excluded="false" initName="upload_speed" isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Upload_speed" name="upload_speed"/>
              <Field excluded="false" initName="download_speed" isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Download_speed" name="download_speed"/>
              <Field excluded="false" initName="cmts" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Cmts" name="cmts"/>
              <Field excluded="false" initName="prov_speed" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
              <Field excluded="false" initName="ip_addr" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
              <Field excluded="false" initName="node" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Node" name="node"/>
            </Schema>
          </Model>
        </Node>
        <Node height="75" width="130" y="80" x="440" label="Pivot" type="Adhoc" uuid="ca1449c3-e067-4eb8-8456-20fce30eb6ae" index="1003">
          <Source dataType="class:InputData" outputType="DStream" uid="0" name="source1">
            <DataSource nodeId="e868221a-6f4c-4cb2-8e22-64d2766f9dee" name="Out1" id="undefined" category="#OUTPUT">
              <Field isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="TIME" name="TIME"/>
              <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Env" name="env"/>
              <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Mac_addr" name="mac_addr"/>
              <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
              <Field isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
              <Field isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Upload_speed" name="upload_speed"/>
              <Field isMeasure="true" isDimension="false" isOptional="true" isArray="false" type="long" label="Download_speed" name="download_speed"/>
              <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Cmts" name="cmts"/>
              <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
              <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
              <Field isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="Node" name="node"/>
            </DataSource>
          </Source>
          <Output referenceType="Pivot" dataType="class:Pivot" outputType="DStream" uid="0" name="PivotOut">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
          </Output>
          <Model>
            <Script><![CDATA[val retval = source1.flatMap(e => {
    val r = scala.collection.mutable.ArrayBuffer.empty[Pivot]
    r += Pivot(new java.sql.Timestamp((e.TIME*1000).toLong),e.env,e.mac_addr,e.status,e.host,e.cmts,e.prov_speed,e.ip_addr,e.node,"Upload_speed",e.upload_speed.getOrElse(0))
    r += Pivot(new java.sql.Timestamp((e.TIME*1000).toLong),e.env,e.mac_addr,e.status,e.host,e.cmts,e.prov_speed,e.ip_addr,e.node,"Download_speed",e.download_speed.getOrElse(0))
    if (Array("complete") contains e.status)
        r += Pivot(new java.sql.Timestamp((e.TIME*1000).toLong),e.env,e.mac_addr,e.status,e.host,e.cmts,e.prov_speed,e.ip_addr,e.node,"SuccessCount",1)
    if (Array("failed") contains e.status)
        r += Pivot(new java.sql.Timestamp((e.TIME*1000).toLong),e.env,e.mac_addr,e.status,e.host,e.cmts,e.prov_speed,e.ip_addr,e.node,"FailureCount",1)
    if (Array("283A4D955D13","485F99DB8E17","485F99DCE078") contains e.mac_addr)
        r += Pivot(new java.sql.Timestamp((e.TIME*1000).toLong),e.env,e.mac_addr,e.status,e.host,e.cmts,e.prov_speed,e.ip_addr,e.node,"KeyDeviceCount",1)
    r
})]]></Script>
          </Model>
        </Node>
        <Node height="75" width="130" y="214" x="600" label="Reference" type="subflow" uuid="3dbc8762-812a-4b3c-891d-502b98640b60" index="1004">
          <Output dataType="(String,String,String,String,String)" outputType="DStream" uid="0" name="Out">
            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Model>
            <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/MetricReferenceData&quot;,&quot;dataSource&quot;:{&quot;dataSource&quot;:&quot;/vitria/m3o/datasource/DefaultDomain/charter_ref_db&quot;},&quot;ref_table&quot;:&quot;viaops_parse_model&quot;,&quot;ref_source_group&quot;:&quot;stva_video&quot;,&quot;ref_filterScript&quot;:&quot;parse_source_group=&apos;${source_group}&apos; and parse_source_name not like &apos;agc.%&apos;&quot;,&quot;poll&quot;:&quot;1&quot;}
</Properties>
            <__subflow__>
              <Flow showFooter="true" name="MetricReferenceData" referenceURI="remote:///viaops.ingestion/MetricReferenceData" acceptedSourceTypes="RDD,DStream,DataFrame" revision="528" isNested="true" uuid="MetricReferenceData" index="1004">
                <Node height="75" width="130" y="20" x="46" label="Load System Model" type="JDBCStream" uuid="6029ac79-48d9-4e91-8d5f-bf6b1e7cc197" index="1004_1">
                  <Output dataType="class:SystemModelData" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model dataSource="/vitria/m3o/datasource/DefaultDomain/charter_ref_db" dataVolume="" dataSpeed="" isClassRef="true" caseClass="SystemModelData" sourceType="jdbc" type="jdbcStream">
                    <__binding__><![CDATA[{"dataSource":"dataSource","databaseList":"","tableList":"ref_table"}]]></__binding__>
                    <Schema>
                      <Field wrapName="metric_id" isOptional="false" isArray="false" clazz="" type="string" label="metric_id" name="metric_id"/>
                      <Field wrapName="sql_qdc" isOptional="false" isArray="false" clazz="" type="string" label="sql_qdc" name="sql_qdc"/>
                      <Field wrapName="json_qdc" isOptional="false" isArray="false" clazz="" type="string" label="json_qdc" name="json_qdc"/>
                      <Field wrapName="aggr_func" isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                      <Field wrapName="parse_source_group" isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                      <Field wrapName="parse_source_name" isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                      <Field wrapName="parse_target_app" isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                      <Field wrapName="parse_target_metric" isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                      <Field wrapName="modified_ts" isOptional="false" isArray="false" clazz="" type="datetime" label="modified_ts" name="modified_ts"/>
                    </Schema>
                    <datasource name="/vitria/m3o/datasource/DefaultDomain/charter_ref_db"/>
                    <query>
                      <table info="{&quot;catalog&quot;:&quot;charter_ref_db&quot;,&quot;name&quot;:&quot;charter_service_model&quot;,&quot;type&quot;:&quot;TABLE&quot;}" defaultSchema="charter_ref_db" schema="charter_ref_db">charter_service_model</table>
                      <columns>
                        <column>aggr_func</column>
                        <column>parse_source_group</column>
                        <column>parse_source_name</column>
                        <column>parse_target_app</column>
                        <column>parse_target_metric</column>
                      </columns>
                      <growColumns/>
                      <filter>${ref_filterScript}</filter>
                      <incremental>false</incremental>
                    </query>
                    <pollRate value="NaN" every="${poll}/m"/>
                  </Model>
                </Node>
                <Node height="135" width="130" y="20" x="380" label="Group Metrics" type="Window" uuid="46c6dae7-217b-466f-8a0a-1f3b14d70d9f" index="1004_2">
                  <Source dataType="class:SystemModelData" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="e0fdeeb6-a708-4a70-8958-837d58e1e40d" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_func" name="aggr_func"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_group" name="parse_source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_name" name="parse_source_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_app" name="parse_target_app"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:SystemModelData" outputType="DStream" uid="0" name="All">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Output dataType="class:SystemModelData" outputType="DStream" uid="1" name="Changes">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Output dataType="class:SystemModelData" outputType="DStream" uid="2" name="Expired">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Output dataType="class:SystemModelData" outputType="DStream" uid="3" name="Deleted">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model restoreState="false" checkpointInterval="/S" partition="" windowPolicy="attribute">
                    <Time mode="system"/>
                    <GroupKeys numPerGroup="1" policy="latest">
                      <GroupKey field="parse_source_group"/>
                      <GroupKey field="parse_source_name"/>
                      <GroupKey field="parse_target_app"/>
                      <GroupKey field="parse_target_metric"/>
                    </GroupKeys>
                    <Expirations baseline="lastevent" duration="/S"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="20" x="553" label="All Metrics" type="Compute" uuid="bc4ea8d5-e474-4b66-8e55-040246f8a424" index="1004_3">
                  <Source dataType="class:SystemModelData" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="46c6dae7-217b-466f-8a0a-1f3b14d70d9f" name="All" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_func" name="aggr_func"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_group" name="parse_source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_name" name="parse_source_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_app" name="parse_target_app"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    </DataSource>
                  </Source>
                  <Output dataType="(String,String,String,String,String)" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model isClassRef="false">
                    <Computes>
                      <Compute wordWarp="true" alias="aggr_func" outputType="string" value="aggr_func" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="parse_source_group" outputType="string" value="parse_source_group" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="parse_source_name" outputType="string" value="parse_source_name" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="parse_target_app" outputType="string" value="parse_target_app" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="parse_target_metric" outputType="string" value="parse_target_metric" arg="" field="*" op="sleText"/>
                    </Computes>
                    <CheckboxStatus isChecked="mixed"/>
                  </Model>
                </Node>
                <Node height="40" width="70" y="40" x="720" label="Out" type="outPort" uuid="354f4d2b-5f04-462e-84fe-455d4a0e8da3" index="1004_4">
                  <Source dataType="(String,String,String,String,String)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="bc4ea8d5-e474-4b66-8e55-040246f8a424" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_func" name="aggr_func"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_group" name="parse_source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_name" name="parse_source_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_app" name="parse_target_app"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    </DataSource>
                  </Source>
                  <Model>
                    <Properties>
{}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="20" x="210" label="FlatMap" type="Adhoc" uuid="e0fdeeb6-a708-4a70-8958-837d58e1e40d" index="1004_5">
                  <Source dataType="class:SystemModelData" outputType="DStream" uid="0" name="source1">
                    <DataSource nodeId="6029ac79-48d9-4e91-8d5f-bf6b1e7cc197" name="out" id="undefined" category="#OUTPUT">
                      <Field column="aggr_func" wrapName="aggr_func" isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="aggr_func" name="aggr_func"/>
                      <Field column="parse_source_group" wrapName="parse_source_group" isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="parse_source_group" name="parse_source_group"/>
                      <Field column="parse_source_name" wrapName="parse_source_name" isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="parse_source_name" name="parse_source_name"/>
                      <Field column="parse_target_app" wrapName="parse_target_app" isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="parse_target_app" name="parse_target_app"/>
                      <Field column="parse_target_metric" wrapName="parse_target_metric" isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    </DataSource>
                  </Source>
                  <Output referenceType="SystemModelData" dataType="class:SystemModelData" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_func" name="aggr_func"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_group" name="parse_source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_source_name" name="parse_source_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_app" name="parse_target_app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="parse_target_metric" name="parse_target_metric"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[val retval = source1.flatMap { data =>
    data.parse_source_name.split(",").map { source_name =>
        SystemModelData(data.aggr_func, data.parse_source_group, source_name, data.parse_target_app, data.parse_target_metric)
    }
}]]></Script>
                  </Model>
                </Node>
                <Link tgtPort="in:0" tgtId="354f4d2b-5f04-462e-84fe-455d4a0e8da3" srcPort="out:0" srcId="bc4ea8d5-e474-4b66-8e55-040246f8a424"/>
                <Link tgtPort="in:0" tgtId="bc4ea8d5-e474-4b66-8e55-040246f8a424" srcPort="dout:0" srcId="46c6dae7-217b-466f-8a0a-1f3b14d70d9f"/>
                <Link tgtPort="din:0" tgtId="e0fdeeb6-a708-4a70-8958-837d58e1e40d" srcPort="out:0" srcId="6029ac79-48d9-4e91-8d5f-bf6b1e7cc197"/>
                <Link tgtPort="in:0" tgtId="46c6dae7-217b-466f-8a0a-1f3b14d70d9f" srcPort="dout:0" srcId="e0fdeeb6-a708-4a70-8958-837d58e1e40d"/>
                <Codes/>
                <Libraries/>
                <Resources/>
                <Properties>[{&quot;editorType&quot;:&quot;_dataSourceSelector&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;dataSource&quot;,&quot;label&quot;:&quot;Datasource&quot;,&quot;type&quot;:&quot;object&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:{&quot;dataSource&quot;:&quot;/vitria/m3o/datasource/DefaultDomain/charter_ref_db&quot;},&quot;defaultValueForExisted&quot;:{&quot;dataSource&quot;:&quot;/vitria/m3o/datasource/DefaultDomain/charter_ref_db&quot;,&quot;databaseURL&quot;:&quot;jdbc:mysql://10.101.3.186:3306/charter_ref_db&quot;,&quot;userName&quot;:&quot;root&quot;,&quot;password&quot;:&quot;&lt;X0ws2Kuv10c59bxYGyv4xvu&gt;&quot;,&quot;driverType&quot;:&quot;com.mysql.jdbc.Driver&quot;},&quot;constraints&quot;:{&quot;type&quot;:&quot;dataSource&quot;,&quot;args&quot;:{}},&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;ref_table&quot;,&quot;label&quot;:&quot;System Model Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_parse_model&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;ref_source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;stva_video&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;script&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;ref_filterScript&quot;,&quot;label&quot;:&quot;Filter Script&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;parse_source_group=&apos;${source_group}&apos;&quot;,&quot;constraints&quot;:{&quot;type&quot;:&quot;script&quot;,&quot;args&quot;:{&quot;scriptMode&quot;:&quot;sql&quot;,&quot;scriptSection&quot;:&quot;false&quot;,&quot;header&quot;:&quot;false&quot;}},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;poll&quot;,&quot;label&quot;:&quot;Poll Rate (Minutes)&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;1&quot;,&quot;defaultValueForExisted&quot;:&quot;1&quot;,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;},&quot;runtimeControl&quot;:false}]</Properties>
                <Types>[{&quot;name&quot;:&quot;SystemModelData&quot;,&quot;namespace&quot;:&quot;&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;aggr_func&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;parse_source_group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;parse_source_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;parse_target_app&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;parse_target_metric&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
              </Flow>
            </__subflow__>
            <__binding__><![CDATA[{"dataSource":"data_source","ref_table":"ref_table","ref_source_group":"source_group","poll":"poll_rate"}]]></__binding__>
          </Model>
        </Node>
        <Node height="95" width="124" y="80" x="800" label="Look Up" type="Join" uuid="de02fcb5-37db-409e-8061-86b34dab4194" index="1005">
          <Source dataType="class:Pivot" outputType="DStream" uid="0" name="source1">
            <DataSource nodeId="ca1449c3-e067-4eb8-8456-20fce30eb6ae" name="PivotOut" id="undefined" category="#OUTPUT">
              <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
            </DataSource>
          </Source>
          <Source dataType="(String,String,String,String,String)" outputType="DStream" uid="1" name="source2">
            <DataSource nodeId="3dbc8762-812a-4b3c-891d-502b98640b60" name="Out" id="undefined" category="#OUTPUT">
              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_func" name="aggr_func"/>
              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_group" name="parse_source_group"/>
              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_source_name" name="parse_source_name"/>
              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_app" name="parse_target_app"/>
              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
            </DataSource>
          </Source>
          <Output dataType="class:IntermediateData" outputType="DStream" uid="0" name="out">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="aggr_func" name="aggr_func"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_app" name="parse_target_app"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
          </Output>
          <Model joinAlgorithms="broadcast" isClassRef="false" _caseClass="IntermediateData" joinType="InnerJoin">
            <Predicates sleText="source1.metric_name = source2.parse_target_metric"/>
            <ProjectionsEditor>
              <ProjectionInfo exclude="false" level="1" name="ts" source="source1.ts"/>
              <ProjectionInfo exclude="false" level="1" name="env" source="source1.env"/>
              <ProjectionInfo exclude="false" level="1" name="mac_addr" source="source1.mac_addr"/>
              <ProjectionInfo exclude="false" level="1" name="status" source="source1.status"/>
              <ProjectionInfo exclude="false" level="1" name="host" source="source1.host"/>
              <ProjectionInfo exclude="false" level="1" name="cmts" source="source1.cmts"/>
              <ProjectionInfo exclude="false" level="1" name="prov_speed" source="source1.prov_speed"/>
              <ProjectionInfo exclude="false" level="1" name="ip_addr" source="source1.ip_addr"/>
              <ProjectionInfo exclude="false" level="1" name="node" source="source1.node"/>
              <ProjectionInfo exclude="false" level="1" name="metric_name" source="source1.metric_name"/>
              <ProjectionInfo exclude="false" level="1" name="metric_value" source="source1.metric_value"/>
              <ProjectionInfo exclude="false" level="1" name="aggr_func" source="source2.aggr_func"/>
              <ProjectionInfo exclude="true" level="1" name="parse_source_group" source="source2.parse_source_group"/>
              <ProjectionInfo exclude="true" level="1" name="parse_source_name" source="source2.parse_source_name"/>
              <ProjectionInfo exclude="false" level="1" name="parse_target_app" source="source2.parse_target_app"/>
              <ProjectionInfo exclude="false" level="1" name="parse_target_metric" source="source2.parse_target_metric"/>
            </ProjectionsEditor>
            <Projections>
              <Projection label="ts" name="ts" source="source1.ts"/>
              <Projection label="env" name="env" source="source1.env"/>
              <Projection label="mac_addr" name="mac_addr" source="source1.mac_addr"/>
              <Projection label="status" name="status" source="source1.status"/>
              <Projection label="host" name="host" source="source1.host"/>
              <Projection label="cmts" name="cmts" source="source1.cmts"/>
              <Projection label="prov_speed" name="prov_speed" source="source1.prov_speed"/>
              <Projection label="ip_addr" name="ip_addr" source="source1.ip_addr"/>
              <Projection label="node" name="node" source="source1.node"/>
              <Projection label="metric_name" name="metric_name" source="source1.metric_name"/>
              <Projection label="metric_value" name="metric_value" source="source1.metric_value"/>
              <Projection label="aggr_func" name="aggr_func" source="source2.aggr_func"/>
              <Projection label="parse_target_app" name="parse_target_app" source="source2.parse_target_app"/>
              <Projection label="parse_target_metric" name="parse_target_metric" source="source2.parse_target_metric"/>
            </Projections>
          </Model>
        </Node>
        <Node height="75" width="130" y="80" x="1240" label="Normalize" type="Compute" uuid="fab3627f-d1c5-4d10-8a96-0a435dd85f0d" index="1006">
          <Source dataType="class:EnrichedData" outputType="DStream" uid="0" name="source">
            <DataSource nodeId="2e5a6c0e-1e75-461c-806e-8cc0e29b1959" name="out" id="undefined" category="#OUTPUT">
              <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="aggr_func" name="aggr_func"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_app" name="parse_target_app"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="device_type" name="device_type"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
            </DataSource>
          </Source>
          <Output dataType="class:Output" outputType="DStream" uid="0" name="out">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
          </Output>
          <Model _caseClass="Output" udfs="generate_datekey" isClassRef="true">
            <Variables>
              <Variable value="unix_timestamp_millisec(ts) / 1000" outputType="long" alias="ts_start"/>
              <Variable value="ts_start + (5*60)" outputType="long" alias="ts_end"/>
            </Variables>
            <Computes>
              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(ts) / 1000" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="(unix_timestamp_millisec(ts) / 1000) + (5*60)" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="app" outputType="string" value="parse_target_app" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="ts_key" outputType="string" value="&quot;&quot;" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="ts_value" outputType="string" value="&quot;&quot;" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="system_tm" outputType="long" value="unix_timestamp_millisec(now()) / 1000" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="process_type" outputType="string" value="if(${stop_after_batch}&gt;0,&quot;Ad-Hoc&quot;,&quot;Realtime&quot;)" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="aggr_type" outputType="string" value="aggr_func" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="source_fmt" outputType="string" value="&quot;csv&quot;" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="source_tz" outputType="string" value="&quot;${time_zone}&quot;" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(ts, &quot;${time_zone}&quot;)" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="metric_name" outputType="string" value="parse_target_metric" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="metric_value" outputType="double" value="metric_value * 1.0" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="metric_uom" outputType="string" value="aggr_func" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="env" outputType="string" value="env" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="mac_addr" outputType="string" value="mac_addr" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="status" outputType="string" value="status" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="host" outputType="string" value="host" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="cmts" outputType="string" value="cmts" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="prov_speed" outputType="string" value="prov_speed" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="ip_addr" outputType="string" value="ip_addr" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="node" outputType="string" value="node" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="device_type" outputType="string" value="device_type" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="firmware_version" outputType="string" value="firmware_version" arg="" field="*" op="sleText"/>
              <Compute wordWarp="true" alias="manufacturer" outputType="string" value="manufacturer" arg="" field="*" op="sleText"/>
            </Computes>
            <CheckboxStatus isChecked="false"/>
          </Model>
        </Node>
        <Node height="75" width="130" y="80" x="1460" label="Output" type="subflow" uuid="896d579d-efc3-4f59-8046-ba4d83e30a58" index="1007">
          <Source dataType="class:Output" outputType="DStream" uid="0" name="source1">
            <DataSource nodeId="fab3627f-d1c5-4d10-8a96-0a435dd85f0d" name="out" id="undefined" category="#OUTPUT">
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
            </DataSource>
          </Source>
          <Output dataType="String" outputType="DStream" uid="0" name="Out">
            <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Model>
            <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/MetricOutput&quot;,&quot;output_stopBatchCount&quot;:0,&quot;OPERATION_MODE&quot;:&quot;Both&quot;,&quot;output_source_group&quot;:&quot;&quot;,&quot;output_source&quot;:&quot;Lease_Logger&quot;,&quot;motimezone&quot;:&quot;Etc/GMT&quot;,&quot;HISTORY_TABLE_FOLDER&quot;:&quot;&quot;,&quot;history_table_name&quot;:&quot;&quot;,&quot;output_partition_keys&quot;:[&quot;date_key&quot;,&quot;metric_name&quot;],&quot;ANOMALY_TARGET_FILENAME&quot;:&quot;&quot;,&quot;anomalyFileNamePrefix&quot;:&quot;&quot;,&quot;keys&quot;:[&quot;metric_name&quot;],&quot;drop_sparksqltable&quot;:&quot;viaops_audit_parser_dropped&quot;,&quot;drop_metric_name&quot;:&quot;Total Duplicate Events&quot;,&quot;output_doaudit&quot;:&quot;true&quot;,&quot;output_audit_table_folder&quot;:&quot;&quot;}
</Properties>
            <__subflow__>
              <Flow showFooter="true" name="MetricOutput" referenceURI="remote:///viaops.ingestion/MetricOutput" acceptedSourceTypes="RDD,DStream,DataFrame" revision="4405" isNested="true" uuid="MetricOutput" index="1007">
                <Node height="40" width="72.703125" y="120" x="90" label="source1" type="inPort" uuid="83dcd221-9159-46d5-8fb4-b6c524c69c02" index="1007_1">
                  <Output referenceType="viaops.ingestion.MetricCommonFields" dataType="class:Output" outputType="DStream" uid="0" name="out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model>
                    <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.MetricCommonFields&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="100" x="760" label="Stream to Anomaly Detection" type="StreamTarget" uuid="16257540-b127-448a-8891-c8a71a46df04" index="1007_2">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="a2992e48-a216-41c5-857a-5230e14d64a6" name="out" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:Output" outputType="DStream" uid="0" name="out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model dataVolume="" dataSpeed="" partitionNum="1" format="json" namePrefix="${anomalyFileNamePrefix}" url="${ANOMALY_TARGET_FILENAME}" type="file">
                    <__binding__><![CDATA[{"fileNamePrefix":""}]]></__binding__>
                  </Model>
                </Node>
                <Node height="75" width="130" y="9" x="760" label="Persist History Table" type="Adhoc" uuid="cfde6cfb-7498-4b34-8dfc-62eb71da9bb4" index="1007_3">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source1">
                    <DataSource nodeId="73490184-781b-4acb-8f0e-500cca2f6ad9" name="out" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output referenceType="string" dataType="String" outputType="DStream" uid="0" name="Out1">
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Script><![CDATA[
import org.apache.hadoop.conf.Configuration
import org.apache.hadoop.fs.{FileStatus, FileSystem, Path}
import java.net.URI
import org.apache.hadoop.fs.PathFilter
import java.util.UUID

def copydir(fs: FileSystem, src: Path, dest: Path): Unit = {
    val children = fs.listStatus(src)
    children.foreach(child => {
        val targetPath = new Path(dest, child.getPath.getName)
        if (child.isDirectory()) {
            val result = fs.mkdirs(targetPath)
            copydir(fs, child.getPath, targetPath)
        } else if (!"_SUCCESS".equals(child.getPath.getName)) {
            var realtarget = new Path(dest, "${output_source}-"+child.getPath.getName)
            if (fs.exists(targetPath)) {
                realtarget = new Path(dest, "${output_source}-"+UUID.randomUUID.toString+"-"+child.getPath.getName)
            }
            fs.rename(child.getPath, realtarget)
        }
    })
    fs.delete(src, true)
}

def getKeyValues(fs: FileSystem, folderName: String, key: String) : Array[String] = {
    val statuses: Array[FileStatus] = fs.listStatus(new Path(folderName))
    val keyvalues: Array[String] = statuses.filter(_.isDirectory).map(_.getPath.getName).filter(_.startsWith(key + "="))
    keyvalues
}

def getSubfolder(fs: FileSystem, folderName: String, keys: Array[String]) : Array[String] = {
    if (keys.length == 0) {
        Array[String]()
    } else {
        val currentkey = keys(0)
        val keyvalues = getKeyValues(fs, folderName, currentkey)

        if (keys.length > 1) {
            keyvalues.flatMap(kv => {
                val subkeyvalues = getSubfolder(fs, folderName.concat("/").concat(kv), keys.drop(1)).map(kv.concat(",").concat(_))
                subkeyvalues
            })
        } else {
            keyvalues
        }
    }
}

def folderNotExist(fs: FileSystem, baseName: String, subName: String): Boolean = {
    !fs.exists(new Path(baseName, subName))
}

val basefolder = "${HISTORY_TABLE_FOLDER}"
val tempfolder = java.util.UUID.randomUUID.toString
//   val tempfolder = "${__flowIndex__}"
val partitionkeys = "${output_partition_keys}".replaceAll("\\[|\\]", "").split(',').map(x => x.trim())

//prepare sql
val historyTableName = "${history_table_name}"
val tempSB = new StringBuilder()
val selectSQL = """select distinct concat(""" + partitionkeys.map(k => s"""concat("$k=", $k)""").addString(tempSB, """ , "/" , """) + s""") from tempMetricOutput"""
//println("==================" + selectSQL)
val repairSQL = "MSCK REPAIR TABLE %s".format(historyTableName)
//println("==================" + repairSQL)
val partitionNum: Int = 1

source1.foreachRDD(rdd => {
    val fs = FileSystem.get(URI.create(basefolder), new Configuration)
    
    //println("================= start get partition")
    //val partitions: Array[String] = if (fs.exists(new Path(basefolder))) {getSubfolder(fs, basefolder, partitionkeys)} else {Array[String]()}
    //println("================= end get partition")
    //partitions.foreach(println)
    
    var needrepair: Boolean = false
    
    val src = new Path(basefolder, tempfolder)
    val dest = new Path(basefolder)
    val df = hiveContext.createDataFrame(rdd)
    
    df.createOrReplaceTempView("tempMetricOutput")
    //println("================= start select hive")
    val arrayP = hiveContext.sql(selectSQL).map(_.getString(0)).collect()
    needrepair = arrayP.exists(ps => folderNotExist(fs, basefolder, ps))
    
    //arrayP.foreach(pvalue => {
    //    println("===============" + pvalue)
    //})
    //println("=============== needrepair: " + needrepair)
    //println("================= end select hive")
    
    df.repartition(partitionNum).write.mode("append").partitionBy(partitionkeys:_*).parquet(src.toUri().toString())
    copydir(fs, src, dest)
    
    //repair table
    if (needrepair) {
        //println("================= repair table")
        if(hiveContext.tableNames.contains(historyTableName)) {
            hiveContext.sql(repairSQL)
        }
        //println("================= end repair table")
    }
})

val retval = source1.map(i => "")   ]]></Script>
                  </Model>
                </Node>
                <Node height="75" width="130" y="192" x="760" label="Count Output Events" type="Aggregate" uuid="b4c41092-f31d-4ad0-809f-b82569d544b5" index="1007_4">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="9327217d-5098-4477-807b-3ee5d8b297d0" name="out" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="(Long,Long)" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" type="long" label="count" name="count"/>
                    <Field isOptional="false" isArray="false" type="long" label="micro_batch_time" name="micro_batch_time"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model isClassRef="false" _caseClass="">
                    <Measures>
                      <Measure asName="count" field="" type="count"/>
                      <Measure asName="micro_batch_time" field="" type="micro_batch_time"/>
                    </Measures>
                    <Window enable="false"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="192" x="953" label="Conver to metrics (Output Events)" type="Compute" uuid="1191f81c-7709-4100-8afd-2b5d3d3d8c2c" index="1007_5">
                  <Source dataType="(Long,Long)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="b4c41092-f31d-4ad0-809f-b82569d544b5" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="long" label="count" name="count"/>
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="long" label="micro_batch_time" name="micro_batch_time"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model udfs="generate_datekey" isClassRef="true" _caseClass="viaops.ingestion.AuditLog">
                    <Computes>
                      <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${motimezone}&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time())/1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="to_option(-1)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_name" outputType="string" value="&quot;Total Output Events&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_value" outputType="string" value="count" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_uom" outputType="string" value="&quot;sum&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="uom_label" outputType="string" value="&quot;Count&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${output_source_group}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="system_tm" outputType="long" value="unix_timestamp_millisec(now())/1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="process_type" outputType="string" value="if(${output_stopBatchCount} &gt; 0, &quot;Ad-Hoc&quot;, &quot;Realtime&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_type" outputType="string" value="&quot;source&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_fmt" outputType="string" value="&quot;others&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_tz" outputType="string" value="&quot;${motimezone}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_key" outputType="string" value="&quot;source_group&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_value" outputType="string" value="&quot;${output_source_group}&quot;" arg="" field="*" op="sleText"/>
                    </Computes>
                    <CheckboxStatus isChecked="false"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="9" x="532" label="Filter History Target" type="Filter" uuid="73490184-781b-4acb-8f0e-500cca2f6ad9" index="1007_6">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="08a937b8-7c88-42ec-83c3-fbefc3631a78" name="output" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:Output" outputType="DStream" uid="0" name="out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model filterModel="form">
                    <Filters>
                      <Filter sleText="&quot;${OPERATION_MODE}&quot; = &quot;History&quot; || &quot;${OPERATION_MODE}&quot; = &quot;Both&quot;" value="" arg="" op="sleText" field=""/>
                    </Filters>
                  </Model>
                </Node>
                <Node height="75" width="130" y="100" x="532" label="Filter Anomaly HDFS Target" type="Filter" uuid="a2992e48-a216-41c5-857a-5230e14d64a6" index="1007_7">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="08a937b8-7c88-42ec-83c3-fbefc3631a78" name="output" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:Output" outputType="DStream" uid="0" name="out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model filterModel="form">
                    <Filters>
                      <Filter sleText="&quot;${OPERATION_MODE}&quot; = &quot;Anomaly&quot; || &quot;${OPERATION_MODE}&quot; = &quot;Both&quot;" value="" arg="" op="sleText" field=""/>
                    </Filters>
                  </Model>
                </Node>
                <Node height="75" width="130" y="192" x="528" label="Enable Audit Log" type="Filter" uuid="9327217d-5098-4477-807b-3ee5d8b297d0" index="1007_8">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="08a937b8-7c88-42ec-83c3-fbefc3631a78" name="output" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:Output" outputType="DStream" uid="0" name="out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model filterModel="form">
                    <Filters>
                      <Filter sleText="&quot;${output_doaudit}&quot; = &quot;True&quot; || &quot;${output_doaudit}&quot; = &quot;true&quot;" value="" arg="" op="sleText" field=""/>
                    </Filters>
                  </Model>
                </Node>
                <Node height="40" width="70" y="29" x="960" label="Out" type="outPort" uuid="e99c3916-b95e-42d2-8934-2213520a1964" index="1007_9">
                  <Source dataType="String" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="cfde6cfb-7498-4b34-8dfc-62eb71da9bb4" name="Out1" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Model>
                    <Properties>
{}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="192" x="1140" label="AuditLog" type="subflow" uuid="c36d7cb3-796a-4b7d-81b3-299bcebd9b6a" index="1007_10">
                  <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="In">
                    <DataSource nodeId="1191f81c-7709-4100-8afd-2b5d3d3d8c2c" name="out" id="undefined" category="#OUTPUT">
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                      <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                      <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation Start Timestamp" name="aggr_start_tm"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Aggregation End Timestamp" name="aggr_end_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Component" name="app"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Key" name="ts_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Timestamp Value" name="ts_value"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="System Timestamp" name="system_tm"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Process Type" name="process_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Aggregation Function" name="aggr_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Format" name="source_fmt"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Source Timezone" name="source_tz"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="Date Key" name="date_key"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Metric Name" name="metric_name"/>
                    <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="double" label="Metric Value" name="metric_value"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Unit of Measure" name="metric_uom"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Env" name="env"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Status" name="status"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Host" name="host"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Cmts" name="cmts"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Prov_speed" name="prov_speed"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Ip_addr" name="ip_addr"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="Node" name="node"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="device_type" name="device_type"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
                    <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
                  </Output>
                  <Model>
                    <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/AuditLog&quot;,&quot;audit_parquetfolder&quot;:&quot;${output_audit_table_folder}&quot;,&quot;source&quot;:&quot;${output_source}&quot;}
</Properties>
                    <__subflow__>
                      <Flow showFooter="true" name="AuditLog" referenceURI="remote:///viaops.ingestion/AuditLog" acceptedSourceTypes="RDD,DStream,DataFrame" revision="800" isNested="true" uuid="AuditLog" index="1007_10">
                        <Node height="40" width="70" y="34" x="20" label="In" type="inPort" uuid="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" index="1007_10_1">
                          <Output referenceType="viaops.ingestion.AuditLog" dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model>
                            <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="40" width="70" y="34" x="440" label="Out" type="outPort" uuid="2a748b73-8ff7-4d04-8666-9123dfba32f3" index="1007_10_2">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Model>
                            <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="140" label="Normalize" type="Compute" uuid="322e4e59-dd18-4247-8532-ecf44de32e0b" index="1007_10_3">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model isClassRef="true" _caseClass="AuditLogTable">
                            <Computes>
                              <Compute wordWarp="true" alias="date_key" outputType="long" value="date_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="aggr_start_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="aggr_end_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_name" outputType="string" value="metric_name" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_value" outputType="string" value="metric_value" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_uom" outputType="string" value="metric_uom" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="uom_label" outputType="string" value="uom_label" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group" outputType="string" value="source_group" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="system_tm" outputType="long" value="system_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="process_type" outputType="string" value="process_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_type" outputType="string" value="aggr_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_fmt" outputType="string" value="source_fmt" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_tz" outputType="string" value="source_tz" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${source}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_key" outputType="string" value="ts_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_value" outputType="string" value="ts_value" arg="" field="*" op="sleText"/>
                            </Computes>
                            <CheckboxStatus isChecked="false"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="340" label="Step 1" type="StreamTarget" uuid="15ea36d5-561f-4969-8443-62afe82d4154" index="1007_10_4">
                          <Source dataType="class:AuditLogTable" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="322e4e59-dd18-4247-8532-ecf44de32e0b" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0,7" partitionColumn="date_key,source_group" partitionSize="" partitionType="eventField" tableName="${audit_parquetfolder}" type="hiveTable">
                            <__binding__><![CDATA[{"snapshotTableName":""}]]></__binding__>
                          </Model>
                        </Node>
                        <Link tgtPort="in:0" tgtId="322e4e59-dd18-4247-8532-ecf44de32e0b" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="2a748b73-8ff7-4d04-8666-9123dfba32f3" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="15ea36d5-561f-4969-8443-62afe82d4154" srcPort="out:0" srcId="322e4e59-dd18-4247-8532-ecf44de32e0b"/>
                        <Codes/>
                        <Libraries/>
                        <Resources/>
                        <Properties>[{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;audit_parquetfolder&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${output_audit_table_folder}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${output_source}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
                        <Types>[{&quot;name&quot;:&quot;AuditLogTable&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;date_key&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_start_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_end_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:true,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_uom&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;uom_label&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;system_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;process_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_fmt&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_tz&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group_prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_key&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
                      </Flow>
                    </__subflow__>
                  </Model>
                </Node>
                <Node height="95" width="130" y="100" x="232" label="Remove Duplicate Metrics" type="removeDuplicateMetrics" uuid="08a937b8-7c88-42ec-83c3-fbefc3631a78" index="1007_11">
                  <Source dataType="class:Output" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="83dcd221-9159-46d5-8fb4-b6c524c69c02" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="app" name="app"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="double" label="metric_value" name="metric_value"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="agc_name" name="agc_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="agc_id" name="agc_id"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="location" name="location"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="meta_name" name="meta_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:Output" outputType="DStream" uid="0" name="output">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="app" name="app"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="double" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="agc_name" name="agc_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="agc_id" name="agc_id"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="location" name="location"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="meta_name" name="meta_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Output dataType="(String, String)" outputType="DStream" uid="1" name="dropped">
                    <Field isOptional="false" isArray="false" type="string" label="error" name="error"/>
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Properties>
{&quot;keys&quot;:[&quot;metric_name&quot;],&quot;value&quot;:&quot;aggr_start_tm&quot;,&quot;enable&quot;:&quot;${output_stopBatchCount} == 0&quot;}
</Properties>
                    <__binding__><![CDATA[{"keys":"keys"}]]></__binding__>
                  </Model>
                </Node>
                <Node height="75" width="130" y="300" x="527" label="Log Duplicate Metrics" type="subflow" uuid="527a713d-a02e-42b4-81c8-1f6799192af1" index="1007_12">
                  <Source dataType="(String, String)" outputType="DStream" uid="0" name="In">
                    <DataSource nodeId="08a937b8-7c88-42ec-83c3-fbefc3631a78" name="dropped" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="Out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/DroppedEvents&quot;,&quot;stopBatchCount&quot;:0,&quot;drop_source_group&quot;:&quot;&quot;,&quot;drop_source&quot;:&quot;&quot;,&quot;vtimezone&quot;:&quot;Etc/GMT&quot;,&quot;drop_sparksqltable&quot;:&quot;&quot;,&quot;drop_metric_name&quot;:&quot;Total Duplicate Events&quot;,&quot;enableAudit&quot;:&quot;false&quot;,&quot;auditTable&quot;:&quot;viaops_audit_parser&quot;}
</Properties>
                    <__subflow__>
                      <Flow showFooter="true" name="DroppedEvents" referenceURI="remote:///viaops.ingestion/DroppedEvents" acceptedSourceTypes="RDD,DStream,DataFrame" revision="809" isNested="true" uuid="DroppedEvents" index="1007_12">
                        <Node height="40" width="70" y="30" x="240" label="In" type="inPort" uuid="cd64c670-6c5f-440e-8b66-441c760166d8" index="1007_12_1">
                          <Output referenceType="viaops.ingestion.DroppedEvents" dataType="(String, String)" outputType="DStream" uid="0" name="Out">
                            <Field isOptional="false" isArray="false" type="string" label="error" name="error"/>
                            <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model>
                            <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.DroppedEvents&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="10" x="366" label="to Dropped Events" type="Compute" uuid="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" index="1007_12_2">
                          <Source dataType="(String, String)" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="cd64c670-6c5f-440e-8b66-441c760166d8" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model udfs="generate_datekey" isClassRef="false" _caseClass="toDroppedEvents_Class">
                            <Computes>
                              <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${vtimezone}&quot;)" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time())/1000" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${drop_source}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="error" outputType="string" value="error" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="event" outputType="string" value="data" arg="" field="*" op="sleText"/>
                            </Computes>
                            <CheckboxStatus isChecked="mixed"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="9" x="560" label="write to Hive" type="StreamTarget" uuid="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" index="1007_12_3">
                          <Source dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="event" name="event"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0" partitionColumn="date_key" partitionSize="" partitionType="eventField" tableName="${drop_sparksqltable}" type="hiveTable"/>
                        </Node>
                        <Node height="40" width="70" y="29" x="746" label="Out" type="outPort" uuid="dd779a23-bc63-4200-8e22-05639b978a68" index="1007_12_4">
                          <Source dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="event" name="event"/>
                            </DataSource>
                          </Source>
                          <Model>
                            <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.DroppedEvents&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="120" x="760" label="Conver to metrics (Dropped Events)" type="Compute" uuid="4efed069-fbe4-42b4-84f5-418fa5488257" index="1007_12_5">
                          <Source dataType="Long" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="328fbd82-fdae-41c6-8c16-c241c5f6da38" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="long" label="count" name="count"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model udfs="generate_datekey" isClassRef="true" _caseClass="viaops.ingestion.AuditLog">
                            <Computes>
                              <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${vtimezone}&quot;)" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time())/1000" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="to_option(-1)" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_name" outputType="string" value="&quot;${drop_metric_name}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_value" outputType="string" value="cast(count, &quot;string&quot;)" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_uom" outputType="string" value="&quot;sum&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="uom_label" outputType="string" value="&quot;Count&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="system_tm" outputType="long" value="unix_timestamp_millisec(now())/1000" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="process_type" outputType="string" value="if(${stopBatchCount} &gt; 0, &quot;Ad-Hoc&quot;, &quot;Realtime&quot;)" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_type" outputType="string" value="&quot;source&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_fmt" outputType="string" value="&quot;others&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_tz" outputType="string" value="&quot;${vtimezone}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_key" outputType="string" value="&quot;source_group&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_value" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                            </Computes>
                            <CheckboxStatus isChecked="false"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="120" x="560" label="Count Dropped Events" type="Aggregate" uuid="328fbd82-fdae-41c6-8c16-c241c5f6da38" index="1007_12_6">
                          <Source dataType="(String, String)" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                            </DataSource>
                          </Source>
                          <Output dataType="Long" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" type="long" label="count" name="count"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model isClassRef="false" _caseClass="">
                            <Measures>
                              <Measure asName="count" field="" type="count"/>
                            </Measures>
                            <Window enable="false"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="120" x="367" label="Do Audit Log" type="Filter" uuid="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" index="1007_12_7">
                          <Source dataType="(String, String)" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="cd64c670-6c5f-440e-8b66-441c760166d8" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                            </DataSource>
                          </Source>
                          <Output dataType="(String, String)" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="data" name="data"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model filterModel="form">
                            <Filters>
                              <Filter sleText="&quot;${enableAudit}&quot; = &quot;True&quot; || &quot;${enableAudit}&quot; = &quot;true&quot;" value="" arg="" op="sleText" field=""/>
                            </Filters>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="120" x="970" label="Log Dropped Event Metric" type="subflow" uuid="9685d7b8-be25-4b6a-87c3-c7be75074079" index="1007_12_8">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="In">
                            <DataSource nodeId="4efed069-fbe4-42b4-84f5-418fa5488257" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model>
                            <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/AuditLog&quot;,&quot;audit_parquetfolder&quot;:&quot;${auditTable}&quot;,&quot;source&quot;:&quot;${drop_source}&quot;}
</Properties>
                            <__subflow__>
                              <Flow showFooter="true" name="AuditLog" referenceURI="remote:///viaops.ingestion/AuditLog" acceptedSourceTypes="RDD,DStream,DataFrame" revision="800" isNested="true" uuid="AuditLog" index="1007_12_8">
                                <Node height="40" width="70" y="34" x="20" label="In" type="inPort" uuid="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" index="1007_12_8_1">
                                  <Output referenceType="viaops.ingestion.AuditLog" dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                                  </Output>
                                  <Model>
                                    <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                                  </Model>
                                </Node>
                                <Node height="40" width="70" y="34" x="440" label="Out" type="outPort" uuid="2a748b73-8ff7-4d04-8666-9123dfba32f3" index="1007_12_8_2">
                                  <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                                    <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                      <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                                    </DataSource>
                                  </Source>
                                  <Model>
                                    <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                                  </Model>
                                </Node>
                                <Node height="75" width="130" y="110" x="140" label="Normalize" type="Compute" uuid="322e4e59-dd18-4247-8532-ecf44de32e0b" index="1007_12_8_3">
                                  <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                                    <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                      <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                                    </DataSource>
                                  </Source>
                                  <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                                  </Output>
                                  <Model isClassRef="true" _caseClass="AuditLogTable">
                                    <Computes>
                                      <Compute wordWarp="true" alias="date_key" outputType="long" value="date_key" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="aggr_start_tm" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="aggr_end_tm" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="metric_name" outputType="string" value="metric_name" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="metric_value" outputType="string" value="metric_value" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="metric_uom" outputType="string" value="metric_uom" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="uom_label" outputType="string" value="uom_label" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="source_group" outputType="string" value="source_group" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="system_tm" outputType="long" value="system_tm" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="process_type" outputType="string" value="process_type" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="aggr_type" outputType="string" value="aggr_type" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="source_fmt" outputType="string" value="source_fmt" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="source_tz" outputType="string" value="source_tz" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${source}&quot;" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="ts_key" outputType="string" value="ts_key" arg="" field="*" op="sleText"/>
                                      <Compute wordWarp="true" alias="ts_value" outputType="string" value="ts_value" arg="" field="*" op="sleText"/>
                                    </Computes>
                                    <CheckboxStatus isChecked="false"/>
                                  </Model>
                                </Node>
                                <Node height="75" width="130" y="110" x="340" label="Step 1" type="StreamTarget" uuid="15ea36d5-561f-4969-8443-62afe82d4154" index="1007_12_8_4">
                                  <Source dataType="class:AuditLogTable" outputType="DStream" uid="0" name="source">
                                    <DataSource nodeId="322e4e59-dd18-4247-8532-ecf44de32e0b" name="out" id="undefined" category="#OUTPUT">
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                      <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                                    </DataSource>
                                  </Source>
                                  <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                                  </Output>
                                  <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0,7" partitionColumn="date_key,source_group" partitionSize="" partitionType="eventField" tableName="${audit_parquetfolder}" type="hiveTable">
                                    <__binding__><![CDATA[{"snapshotTableName":""}]]></__binding__>
                                  </Model>
                                </Node>
                                <Link tgtPort="in:0" tgtId="322e4e59-dd18-4247-8532-ecf44de32e0b" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                                <Link tgtPort="in:0" tgtId="2a748b73-8ff7-4d04-8666-9123dfba32f3" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                                <Link tgtPort="in:0" tgtId="15ea36d5-561f-4969-8443-62afe82d4154" srcPort="out:0" srcId="322e4e59-dd18-4247-8532-ecf44de32e0b"/>
                                <Codes/>
                                <Libraries/>
                                <Resources/>
                                <Properties>[{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;audit_parquetfolder&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${auditTable}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;defaultVal&quot;:&quot;viaops_ingestion_auditlog&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${drop_source}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;defaultVal&quot;:&quot;&quot;}]</Properties>
                                <Types>[{&quot;name&quot;:&quot;AuditLogTable&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;date_key&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_start_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_end_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:true,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_uom&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;uom_label&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;system_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;process_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_fmt&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_tz&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group_prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_key&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
                              </Flow>
                            </__subflow__>
                            <__binding__><![CDATA[{"audit_parquetfolder":"","source":""}]]></__binding__>
                          </Model>
                        </Node>
                        <Link tgtPort="din:0" tgtId="9685d7b8-be25-4b6a-87c3-c7be75074079" srcPort="out:0" srcId="4efed069-fbe4-42b4-84f5-418fa5488257"/>
                        <Link tgtPort="in:0" tgtId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" srcPort="out:0" srcId="cd64c670-6c5f-440e-8b66-441c760166d8"/>
                        <Link tgtPort="in:0" tgtId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" srcPort="out:0" srcId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0"/>
                        <Link tgtPort="in:0" tgtId="dd779a23-bc63-4200-8e22-05639b978a68" srcPort="out:0" srcId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3"/>
                        <Link tgtPort="in:0" tgtId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" srcPort="out:0" srcId="cd64c670-6c5f-440e-8b66-441c760166d8"/>
                        <Link tgtPort="in:0" tgtId="328fbd82-fdae-41c6-8c16-c241c5f6da38" srcPort="out:0" srcId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9"/>
                        <Link tgtPort="in:0" tgtId="4efed069-fbe4-42b4-84f5-418fa5488257" srcPort="dout:0" srcId="328fbd82-fdae-41c6-8c16-c241c5f6da38"/>
                        <Codes/>
                        <Libraries/>
                        <Resources/>
                        <Properties>[{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;stopBatchCount&quot;,&quot;label&quot;:&quot;Stop After n Microbatch&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:0,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;drop_source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;drop_source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;vtimezone&quot;,&quot;label&quot;:&quot;Time Zone&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Etc/GMT&quot;,&quot;defaultValueForExisted&quot;:&quot;Europe/London&quot;,&quot;enumSource&quot;:&quot;rest:/global/?op=get.timezones&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;drop_sparksqltable&quot;,&quot;label&quot;:&quot;Dropped Events Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser_dropped&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Audit&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;drop_metric_name&quot;,&quot;label&quot;:&quot;Dropped Events Metric Name&quot;,&quot;desc&quot;:&quot;The metric name which is used to do the audit log&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:true,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Total Duplicate Events&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;boolean&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;enableAudit&quot;,&quot;label&quot;:&quot;Audit Log&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;false&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;auditTable&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
                      </Flow>
                    </__subflow__>
                    <__binding__><![CDATA[{"drop_source_group":"output_source_group","drop_source":"output_source","vtimezone":"motimezone","drop_sparksqltable":"drop_sparksqltable","stopBatchCount":"output_stopBatchCount","enableAudit":"output_doaudit","auditTable":"output_audit_table_folder","drop_metric_name":"drop_metric_name"}]]></__binding__>
                  </Model>
                </Node>
                <Link tgtPort="din:0" tgtId="527a713d-a02e-42b4-81c8-1f6799192af1" srcPort="dout:1" srcId="08a937b8-7c88-42ec-83c3-fbefc3631a78"/>
                <Link tgtPort="din:0" tgtId="c36d7cb3-796a-4b7d-81b3-299bcebd9b6a" srcPort="out:0" srcId="1191f81c-7709-4100-8afd-2b5d3d3d8c2c"/>
                <Link tgtPort="in:0" tgtId="e99c3916-b95e-42d2-8934-2213520a1964" srcPort="dout:0" srcId="cfde6cfb-7498-4b34-8dfc-62eb71da9bb4"/>
                <Link tgtPort="in:0" tgtId="b4c41092-f31d-4ad0-809f-b82569d544b5" srcPort="out:0" srcId="9327217d-5098-4477-807b-3ee5d8b297d0"/>
                <Link tgtPort="din:0" tgtId="cfde6cfb-7498-4b34-8dfc-62eb71da9bb4" srcPort="out:0" srcId="73490184-781b-4acb-8f0e-500cca2f6ad9"/>
                <Link tgtPort="in:0" tgtId="1191f81c-7709-4100-8afd-2b5d3d3d8c2c" srcPort="dout:0" srcId="b4c41092-f31d-4ad0-809f-b82569d544b5"/>
                <Link tgtPort="in:0" tgtId="16257540-b127-448a-8891-c8a71a46df04" srcPort="out:0" srcId="a2992e48-a216-41c5-857a-5230e14d64a6"/>
                <Link tgtPort="in:0" tgtId="08a937b8-7c88-42ec-83c3-fbefc3631a78" srcPort="out:0" srcId="83dcd221-9159-46d5-8fb4-b6c524c69c02"/>
                <Link tgtPort="in:0" tgtId="73490184-781b-4acb-8f0e-500cca2f6ad9" srcPort="dout:0" srcId="08a937b8-7c88-42ec-83c3-fbefc3631a78"/>
                <Link tgtPort="in:0" tgtId="a2992e48-a216-41c5-857a-5230e14d64a6" srcPort="dout:0" srcId="08a937b8-7c88-42ec-83c3-fbefc3631a78"/>
                <Link tgtPort="in:0" tgtId="9327217d-5098-4477-807b-3ee5d8b297d0" srcPort="dout:0" srcId="08a937b8-7c88-42ec-83c3-fbefc3631a78"/>
                <Codes/>
                <Libraries/>
                <Resources/>
                <Properties>[{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;output_stopBatchCount&quot;,&quot;label&quot;:&quot;Stop After n Microbatch&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:0,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;,&quot;args&quot;:{}},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;sparkSelect&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;,&quot;options.History&quot;:&quot;constraints.args.options.0.label&quot;,&quot;options.Anomaly&quot;:&quot;constraints.args.options.1.label&quot;,&quot;options.Both&quot;:&quot;constraints.args.options.2.label&quot;},&quot;name&quot;:&quot;OPERATION_MODE&quot;,&quot;label&quot;:&quot;Operation Mode&quot;,&quot;desc&quot;:&quot;Controls output target routing to History table and/or Anomaly HDFS Target&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Both&quot;,&quot;constraints&quot;:{&quot;type&quot;:&quot;sparkSelect&quot;,&quot;args&quot;:{&quot;options&quot;:[{&quot;label&quot;:&quot;History&quot;,&quot;value&quot;:&quot;History&quot;},{&quot;label&quot;:&quot;Anomaly&quot;,&quot;value&quot;:&quot;Anomaly&quot;},{&quot;label&quot;:&quot;Both&quot;,&quot;value&quot;:&quot;Both&quot;}],&quot;needPlaceholder&quot;:true,&quot;multiple&quot;:false,&quot;url&quot;:&quot;http://10.101.7.163:18080/vitria-oi/rest/app/spark/space/VIAOps Ingestion/sparkm/VIAOps - Aggregate Output MetricReferenceData Template&quot;,&quot;_cid&quot;:&quot;510cb45b-ed25-4eef-89de-952be285ee4c&quot;,&quot;name&quot;:&quot;value&quot;}},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;output_source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;output_source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;motimezone&quot;,&quot;label&quot;:&quot;Time Zone&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Etc/GMT&quot;,&quot;enumSource&quot;:&quot;rest:/global/?op=get.timezones&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;HISTORY_TABLE_FOLDER&quot;,&quot;label&quot;:&quot;Spark SQL Table URL&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;history_table_name&quot;,&quot;label&quot;:&quot;Spark SQL Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;fieldMultiSelect&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;output_partition_keys&quot;,&quot;label&quot;:&quot;Partition Fields&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;controlValue&quot;:&quot;&quot;,&quot;constraints&quot;:{&quot;type&quot;:&quot;fieldMultiSelect&quot;,&quot;args&quot;:{&quot;nodeType&quot;:&quot;primitive&quot;,&quot;sourcePrefix&quot;:false,&quot;sourceName&quot;:&quot;&quot;,&quot;expandArray&quot;:false,&quot;types&quot;:[&quot;string&quot;,&quot;boolean&quot;,&quot;integer&quot;,&quot;long&quot;,&quot;double&quot;,&quot;float&quot;,&quot;date&quot;,&quot;time&quot;,&quot;datetime&quot;,&quot;array&quot;]}},&quot;sourceSchemaSensitive&quot;:true,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Target&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;ANOMALY_TARGET_FILENAME&quot;,&quot;label&quot;:&quot;Anomaly File URL&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;anomalyFileNamePrefix&quot;,&quot;label&quot;:&quot;Anomaly File Name Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:&quot;true&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;},{&quot;editorType&quot;:&quot;fieldMultiSelect&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;keys&quot;,&quot;label&quot;:&quot;State Key Columns&quot;,&quot;desc&quot;:&quot;the key columns to remove duplicate&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;impactSchema&quot;:&quot;false&quot;,&quot;escapeValue&quot;:false,&quot;resolveProperty&quot;:false,&quot;constraints&quot;:{&quot;type&quot;:&quot;fieldMultiSelect&quot;,&quot;args&quot;:{&quot;nodeType&quot;:&quot;primitive&quot;,&quot;sourcePrefix&quot;:false,&quot;sourceName&quot;:&quot;&quot;,&quot;expandArray&quot;:false,&quot;types&quot;:[&quot;string&quot;,&quot;boolean&quot;,&quot;integer&quot;,&quot;long&quot;,&quot;double&quot;,&quot;float&quot;,&quot;date&quot;,&quot;time&quot;,&quot;datetime&quot;,&quot;array&quot;]}},&quot;sourceSchemaSensitive&quot;:true,&quot;value&quot;:[&quot;metric_name&quot;],&quot;groupLabel&quot;:&quot;Target&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;name&quot;:&quot;drop_sparksqltable&quot;,&quot;label&quot;:&quot;Dropped Events Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser_dropped&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Audit&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;name&quot;:&quot;drop_metric_name&quot;,&quot;label&quot;:&quot;Dropped Events Metric Name&quot;,&quot;desc&quot;:&quot;The metric name which is used to do the audit log&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:true,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Total Duplicate Events&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Audit&quot;},{&quot;editorType&quot;:&quot;boolean&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;output_doaudit&quot;,&quot;label&quot;:&quot;Audit Log&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;true&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;output_audit_table_folder&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
              </Flow>
            </__subflow__>
            <__binding__><![CDATA[{"output_stopBatchCount":"stop_after_batch","OPERATION_MODE":"operation_mode","output_source_group":"source_group","output_source":"source_group_prefix","motimezone":"time_zone","HISTORY_TABLE_FOLDER":"spark_sql_table_url","history_table_name":"spark_sql_table","ANOMALY_TARGET_FILENAME":"anomaly_file_url","anomalyFileNamePrefix":"anomaly_file_name_prefix","output_doaudit":"enableAudit","output_audit_table_folder":"auditUrl"}]]></__binding__>
          </Model>
        </Node>
        <Node height="75" width="130" y="211" x="440" label="Dropped" type="subflow" uuid="73faa65b-1254-4aa6-8e8b-fa5e1c03be81" index="1008">
          <Source dataType="(String,String)" outputType="DStream" uid="0" name="In">
            <DataSource nodeId="e868221a-6f4c-4cb2-8e22-64d2766f9dee" name="Dropped" id="undefined" category="#OUTPUT">
              <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="error" name="___error___"/>
              <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
            </DataSource>
          </Source>
          <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="Out">
            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
            <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
          </Output>
          <Model>
            <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/DroppedEvents&quot;,&quot;stopBatchCount&quot;:0,&quot;drop_source_group&quot;:&quot;&quot;,&quot;drop_source&quot;:&quot;&quot;,&quot;vtimezone&quot;:&quot;Etc/GMT&quot;,&quot;drop_sparksqltable&quot;:&quot;&quot;,&quot;drop_metric_name&quot;:&quot;Total Bad Events&quot;,&quot;enableAudit&quot;:&quot;true&quot;,&quot;auditTable&quot;:&quot;viaops_audit_parser&quot;}
</Properties>
            <__subflow__>
              <Flow showFooter="true" name="DroppedEvents" referenceURI="remote:///viaops.ingestion/DroppedEvents" acceptedSourceTypes="RDD,DStream,DataFrame" revision="809" isNested="true" uuid="DroppedEvents" index="1008">
                <Node height="40" width="70" y="30" x="240" label="In" type="inPort" uuid="cd64c670-6c5f-440e-8b66-441c760166d8" index="1008_1">
                  <Output referenceType="viaops.ingestion.DroppedEvents" dataType="(String,String)" outputType="DStream" uid="0" name="Out">
                    <Field isOptional="false" isArray="false" type="string" label="error" name="___error___"/>
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.DroppedEvents&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="10" x="366" label="to Dropped Events" type="Compute" uuid="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" index="1008_2">
                  <Source dataType="(String,String)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="cd64c670-6c5f-440e-8b66-441c760166d8" name="Out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="error" name="___error___"/>
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model udfs="generate_datekey" isClassRef="false" _caseClass="toDroppedEvents_Class">
                    <Computes>
                      <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${vtimezone}&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time())/1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${drop_source}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="error" outputType="string" value="error" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="event" outputType="string" value="data" arg="" field="*" op="sleText"/>
                    </Computes>
                    <CheckboxStatus isChecked="mixed"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="9" x="560" label="write to Hive" type="StreamTarget" uuid="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" index="1008_3">
                  <Source dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="event" name="event"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="error" name="error"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="event" name="event"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0" partitionColumn="date_key" partitionSize="" partitionType="eventField" tableName="${drop_sparksqltable}" type="hiveTable"/>
                </Node>
                <Node height="40" width="70" y="29" x="746" label="Out" type="outPort" uuid="dd779a23-bc63-4200-8e22-05639b978a68" index="1008_4">
                  <Source dataType="class:toDroppedEvents_Class" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="error" name="error"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="event" name="event"/>
                    </DataSource>
                  </Source>
                  <Model>
                    <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.DroppedEvents&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                  </Model>
                </Node>
                <Node height="75" width="130" y="120" x="760" label="Conver to metrics (Dropped Events)" type="Compute" uuid="4efed069-fbe4-42b4-84f5-418fa5488257" index="1008_5">
                  <Source dataType="Long" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="328fbd82-fdae-41c6-8c16-c241c5f6da38" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="long" label="count" name="count"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model udfs="generate_datekey" isClassRef="true" _caseClass="viaops.ingestion.AuditLog">
                    <Computes>
                      <Compute wordWarp="true" alias="date_key" outputType="long" value="generate_datekey(microbatch_time(), &quot;${vtimezone}&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="unix_timestamp_millisec(microbatch_time())/1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="to_option(-1)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_name" outputType="string" value="&quot;${drop_metric_name}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_value" outputType="string" value="cast(count, &quot;string&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="metric_uom" outputType="string" value="&quot;sum&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="uom_label" outputType="string" value="&quot;Count&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_group" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="system_tm" outputType="long" value="unix_timestamp_millisec(now())/1000" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="process_type" outputType="string" value="if(${stopBatchCount} &gt; 0, &quot;Ad-Hoc&quot;, &quot;Realtime&quot;)" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="aggr_type" outputType="string" value="&quot;source&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_fmt" outputType="string" value="&quot;others&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="source_tz" outputType="string" value="&quot;${vtimezone}&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_key" outputType="string" value="&quot;source_group&quot;" arg="" field="*" op="sleText"/>
                      <Compute wordWarp="true" alias="ts_value" outputType="string" value="&quot;${drop_source_group}&quot;" arg="" field="*" op="sleText"/>
                    </Computes>
                    <CheckboxStatus isChecked="false"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="120" x="560" label="Count Dropped Events" type="Aggregate" uuid="328fbd82-fdae-41c6-8c16-c241c5f6da38" index="1008_6">
                  <Source dataType="(String,String)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="error" name="___error___"/>
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output dataType="Long" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" type="long" label="count" name="count"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model isClassRef="false" _caseClass="">
                    <Measures>
                      <Measure asName="count" field="" type="count"/>
                    </Measures>
                    <Window enable="false"/>
                  </Model>
                </Node>
                <Node height="75" width="130" y="120" x="367" label="Do Audit Log" type="Filter" uuid="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" index="1008_7">
                  <Source dataType="(String,String)" outputType="DStream" uid="0" name="source">
                    <DataSource nodeId="cd64c670-6c5f-440e-8b66-441c760166d8" name="Out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="error" name="___error___"/>
                      <Field isOptional="false" isArray="false" isMeasure="false" isDimension="false" type="string" label="data" name="data"/>
                    </DataSource>
                  </Source>
                  <Output dataType="(String,String)" outputType="DStream" uid="0" name="out">
                    <Field isOptional="false" isArray="false" type="string" label="error" name="___error___"/>
                    <Field isOptional="false" isArray="false" type="string" label="data" name="data"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model filterModel="form">
                    <Filters>
                      <Filter sleText="&quot;${enableAudit}&quot; = &quot;True&quot; || &quot;${enableAudit}&quot; = &quot;true&quot;" value="" arg="" op="sleText" field=""/>
                    </Filters>
                  </Model>
                </Node>
                <Node height="75" width="130" y="120" x="970" label="Log Dropped Event Metric" type="subflow" uuid="9685d7b8-be25-4b6a-87c3-c7be75074079" index="1008_8">
                  <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="In">
                    <DataSource nodeId="4efed069-fbe4-42b4-84f5-418fa5488257" name="out" id="undefined" category="#OUTPUT">
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                      <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                      <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                    </DataSource>
                  </Source>
                  <Output dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                    <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                    <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                    <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                    <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                  </Output>
                  <Model>
                    <Properties>
{&quot;subFlow&quot;:&quot;remote:///viaops.ingestion/AuditLog&quot;,&quot;audit_parquetfolder&quot;:&quot;${auditTable}&quot;,&quot;source&quot;:&quot;${drop_source}&quot;}
</Properties>
                    <__subflow__>
                      <Flow showFooter="true" name="AuditLog" referenceURI="remote:///viaops.ingestion/AuditLog" acceptedSourceTypes="RDD,DStream,DataFrame" revision="800" isNested="true" uuid="AuditLog" index="1008_8">
                        <Node height="40" width="70" y="34" x="20" label="In" type="inPort" uuid="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" index="1008_8_1">
                          <Output referenceType="viaops.ingestion.AuditLog" dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="Out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model>
                            <Properties>
{&quot;portType&quot;:&quot;DStream&quot;,&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="40" width="70" y="34" x="440" label="Out" type="outPort" uuid="2a748b73-8ff7-4d04-8666-9123dfba32f3" index="1008_8_2">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Model>
                            <Properties>
{&quot;type&quot;:{&quot;name&quot;:&quot;viaops.ingestion.AuditLog&quot;,&quot;kind&quot;:&quot;caseclass&quot;}}
</Properties>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="140" label="Normalize" type="Compute" uuid="322e4e59-dd18-4247-8532-ecf44de32e0b" index="1008_8_3">
                          <Source dataType="class:viaops.ingestion.AuditLog" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3" name="Out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model isClassRef="true" _caseClass="AuditLogTable">
                            <Computes>
                              <Compute wordWarp="true" alias="date_key" outputType="long" value="date_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_start_tm" outputType="long" value="aggr_start_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_end_tm" outputType="long" value="aggr_end_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_name" outputType="string" value="metric_name" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_value" outputType="string" value="metric_value" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="metric_uom" outputType="string" value="metric_uom" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="uom_label" outputType="string" value="uom_label" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group" outputType="string" value="source_group" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="system_tm" outputType="long" value="system_tm" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="process_type" outputType="string" value="process_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="aggr_type" outputType="string" value="aggr_type" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_fmt" outputType="string" value="source_fmt" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_tz" outputType="string" value="source_tz" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="source_group_prefix" outputType="string" value="&quot;${source}&quot;" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_key" outputType="string" value="ts_key" arg="" field="*" op="sleText"/>
                              <Compute wordWarp="true" alias="ts_value" outputType="string" value="ts_value" arg="" field="*" op="sleText"/>
                            </Computes>
                            <CheckboxStatus isChecked="false"/>
                          </Model>
                        </Node>
                        <Node height="75" width="130" y="110" x="340" label="Step 1" type="StreamTarget" uuid="15ea36d5-561f-4969-8443-62afe82d4154" index="1008_8_4">
                          <Source dataType="class:AuditLogTable" outputType="DStream" uid="0" name="source">
                            <DataSource nodeId="322e4e59-dd18-4247-8532-ecf44de32e0b" name="out" id="undefined" category="#OUTPUT">
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="date_key" name="date_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                              <Field isOptional="true" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_name" name="metric_name"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_value" name="metric_value"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="metric_uom" name="metric_uom"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="uom_label" name="uom_label"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group" name="source_group"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="long" label="system_tm" name="system_tm"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="process_type" name="process_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="aggr_type" name="aggr_type"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_fmt" name="source_fmt"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_tz" name="source_tz"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="source_group_prefix" name="source_group_prefix"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_key" name="ts_key"/>
                              <Field isOptional="false" isArray="false" clazz="" isMeasure="false" isDimension="false" type="string" label="ts_value" name="ts_value"/>
                            </DataSource>
                          </Source>
                          <Output dataType="class:AuditLogTable" outputType="DStream" uid="0" name="out">
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="date_key" name="date_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="aggr_start_tm" name="aggr_start_tm"/>
                            <Field isOptional="true" isArray="false" clazz="" type="long" label="aggr_end_tm" name="aggr_end_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_name" name="metric_name"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_value" name="metric_value"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="metric_uom" name="metric_uom"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="uom_label" name="uom_label"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group" name="source_group"/>
                            <Field isOptional="false" isArray="false" clazz="" type="long" label="system_tm" name="system_tm"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="process_type" name="process_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="aggr_type" name="aggr_type"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_fmt" name="source_fmt"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_tz" name="source_tz"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="source_group_prefix" name="source_group_prefix"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_key" name="ts_key"/>
                            <Field isOptional="false" isArray="false" clazz="" type="string" label="ts_value" name="ts_value"/>
                            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
                          </Output>
                          <Model dataVolume="" dataSpeed="" partitionNum="1" overwrite="false" timeColumn="" partitionIndex="0,7" partitionColumn="date_key,source_group" partitionSize="" partitionType="eventField" tableName="${audit_parquetfolder}" type="hiveTable">
                            <__binding__><![CDATA[{"snapshotTableName":""}]]></__binding__>
                          </Model>
                        </Node>
                        <Link tgtPort="in:0" tgtId="322e4e59-dd18-4247-8532-ecf44de32e0b" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="2a748b73-8ff7-4d04-8666-9123dfba32f3" srcPort="out:0" srcId="224f8fb5-0fe9-4c00-8c04-2395c68c02d3"/>
                        <Link tgtPort="in:0" tgtId="15ea36d5-561f-4969-8443-62afe82d4154" srcPort="out:0" srcId="322e4e59-dd18-4247-8532-ecf44de32e0b"/>
                        <Codes/>
                        <Libraries/>
                        <Resources/>
                        <Properties>[{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;audit_parquetfolder&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${auditTable}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;defaultVal&quot;:&quot;viaops_ingestion_auditlog&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;${drop_source}&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;defaultVal&quot;:&quot;&quot;}]</Properties>
                        <Types>[{&quot;name&quot;:&quot;AuditLogTable&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;date_key&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_start_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_end_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:true,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;metric_uom&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;uom_label&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;system_tm&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;process_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;aggr_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_fmt&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_tz&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;source_group_prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_key&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false},{&quot;name&quot;:&quot;ts_value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isOptional&quot;:false,&quot;_isArray&quot;:false}]}]</Types>
                      </Flow>
                    </__subflow__>
                    <__binding__><![CDATA[{"audit_parquetfolder":"","source":""}]]></__binding__>
                  </Model>
                </Node>
                <Link tgtPort="din:0" tgtId="9685d7b8-be25-4b6a-87c3-c7be75074079" srcPort="out:0" srcId="4efed069-fbe4-42b4-84f5-418fa5488257"/>
                <Link tgtPort="in:0" tgtId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0" srcPort="out:0" srcId="cd64c670-6c5f-440e-8b66-441c760166d8"/>
                <Link tgtPort="in:0" tgtId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3" srcPort="out:0" srcId="41a6a5ab-b013-4059-854b-b4d7a89ef9a0"/>
                <Link tgtPort="in:0" tgtId="dd779a23-bc63-4200-8e22-05639b978a68" srcPort="out:0" srcId="7f77a1d4-f96e-4a1e-86f8-d91ec481a0a3"/>
                <Link tgtPort="in:0" tgtId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9" srcPort="out:0" srcId="cd64c670-6c5f-440e-8b66-441c760166d8"/>
                <Link tgtPort="in:0" tgtId="328fbd82-fdae-41c6-8c16-c241c5f6da38" srcPort="out:0" srcId="3e6cf41d-6500-4dde-8d2b-228ccd5f9fa9"/>
                <Link tgtPort="in:0" tgtId="4efed069-fbe4-42b4-84f5-418fa5488257" srcPort="dout:0" srcId="328fbd82-fdae-41c6-8c16-c241c5f6da38"/>
                <Codes/>
                <Libraries/>
                <Resources/>
                <Properties>[{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;common&quot;,&quot;name&quot;:&quot;stopBatchCount&quot;,&quot;label&quot;:&quot;Stop After n Microbatch&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:0,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;},&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;drop_source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;drop_source&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;vtimezone&quot;,&quot;label&quot;:&quot;Time Zone&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Etc/GMT&quot;,&quot;defaultValueForExisted&quot;:&quot;Europe/London&quot;,&quot;enumSource&quot;:&quot;rest:/global/?op=get.timezones&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;drop_sparksqltable&quot;,&quot;label&quot;:&quot;Dropped Events Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser_dropped&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Audit&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;drop_metric_name&quot;,&quot;label&quot;:&quot;Dropped Events Metric Name&quot;,&quot;desc&quot;:&quot;The metric name which is used to do the audit log&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:true,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Total Bad Events&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;boolean&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;enableAudit&quot;,&quot;label&quot;:&quot;Audit Log&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;true&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;name&quot;:&quot;auditTable&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false}]</Properties>
              </Flow>
            </__subflow__>
            <__binding__><![CDATA[{"drop_source_group":"source_group","drop_sparksqltable":"agg_dropped_events","vtimezone":"time_zone","drop_source":"source_group_prefix"}]]></__binding__>
          </Model>
        </Node>
        <Node height="75" width="130" y="212" x="800" label="Enrichment" type="JDBCStream" uuid="7c3989f6-4cde-452b-89a2-f5928686b067" index="1009">
          <Output dataType="class:EnrichmentData" outputType="DStream" uid="0" name="out">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field column="mac_addr" isOptional="false" isArray="false" type="string" wrapName="mac_addr" label="mac_addr" name="mac_addr"/>
            <Field column="device_type" isOptional="false" isArray="false" type="string" wrapName="device_type" label="device_type" name="device_type"/>
            <Field column="firmware_version" isOptional="false" isArray="false" type="string" wrapName="firmware_version" label="firmware_version" name="firmware_version"/>
            <Field column="manufacturer" isOptional="false" isArray="false" type="string" wrapName="manufacturer" label="manufacturer" name="manufacturer"/>
          </Output>
          <Model dataSource="/vitria/m3o/datasource/DefaultDomain/charter_ref_db" dataVolume="" dataSpeed="" isClassRef="false" caseClass="EnrichmentData" sourceType="jdbc" type="jdbcStream">
            <__binding__><![CDATA[{"dataSource":""}]]></__binding__>
            <Schema>
              <Field clazz="" isOptional="false" isArray="false" type="string" wrapName="mac_addr" label="mac_addr" name="mac_addr"/>
              <Field clazz="" isOptional="false" isArray="false" type="string" wrapName="device_type" label="device_type" name="device_type"/>
              <Field clazz="" isOptional="false" isArray="false" type="string" wrapName="firmware_version" label="firmware_version" name="firmware_version"/>
              <Field clazz="" isOptional="false" isArray="false" type="string" wrapName="manufacturer" label="manufacturer" name="manufacturer"/>
            </Schema>
            <datasource name="/vitria/m3o/datasource/DefaultDomain/charter_ref_db"/>
            <query>
              <table schema="charter_ref_db" defaultSchema="charter_ref_db" info="{&quot;catalog&quot;:&quot;charter_ref_db&quot;,&quot;name&quot;:&quot;speedtest_devices&quot;,&quot;type&quot;:&quot;TABLE&quot;}">speedtest_devices</table>
              <columns>
                <column>mac_addr</column>
                <column>device_type</column>
                <column>firmware_version</column>
                <column>manufacturer</column>
              </columns>
              <growColumns/>
              <filter/>
              <incremental>false</incremental>
            </query>
            <pollRate value="60" every="1/m"/>
          </Model>
        </Node>
        <Node height="95" width="130" y="80" x="1028" label="Enrich" type="Join" uuid="2e5a6c0e-1e75-461c-806e-8cc0e29b1959" index="1010">
          <Source dataType="class:IntermediateData" outputType="DStream" uid="0" name="source1">
            <DataSource nodeId="de02fcb5-37db-409e-8061-86b34dab4194" name="out" id="undefined" category="#OUTPUT">
              <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
              <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="aggr_func" name="aggr_func"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_app" name="parse_target_app"/>
              <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
            </DataSource>
          </Source>
          <Source dataType="class:EnrichmentData" outputType="DStream" uid="1" name="source2">
            <DataSource nodeId="7c3989f6-4cde-452b-89a2-f5928686b067" name="out" id="undefined" category="#OUTPUT">
              <Field column="mac_addr" isOptional="false" isArray="false" type="string" wrapName="mac_addr" label="mac_addr" name="mac_addr"/>
              <Field column="device_type" isOptional="false" isArray="false" type="string" wrapName="device_type" label="device_type" name="device_type"/>
              <Field column="firmware_version" isOptional="false" isArray="false" type="string" wrapName="firmware_version" label="firmware_version" name="firmware_version"/>
              <Field column="manufacturer" isOptional="false" isArray="false" type="string" wrapName="manufacturer" label="manufacturer" name="manufacturer"/>
            </DataSource>
          </Source>
          <Output dataType="class:EnrichedData" outputType="DStream" uid="0" name="out">
            <ExploreConfig>{&quot;_index&quot;:&quot;Default&quot;,&quot;items&quot;:[{&quot;name&quot;:&quot;Default&quot;}]}</ExploreConfig>
            <Field clazz="" isMeasure="false" isDimension="false" isOptional="false" isArray="false" type="datetime" label="ts" name="ts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="env" name="env"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="mac_addr" name="mac_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="status" name="status"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="host" name="host"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="cmts" name="cmts"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="prov_speed" name="prov_speed"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="ip_addr" name="ip_addr"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="node" name="node"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="metric_name" name="metric_name"/>
            <Field clazz="" isMeasure="true" isDimension="false" isOptional="false" isArray="false" type="long" label="metric_value" name="metric_value"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="aggr_func" name="aggr_func"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_app" name="parse_target_app"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="false" isArray="false" type="string" label="parse_target_metric" name="parse_target_metric"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="device_type" name="device_type"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="firmware_version" name="firmware_version"/>
            <Field clazz="" isMeasure="false" isDimension="true" isOptional="true" isArray="false" type="string" label="manufacturer" name="manufacturer"/>
          </Output>
          <Model joinAlgorithms="broadcast" isClassRef="false" _caseClass="EnrichedData" joinType="LeftOuterJoin">
            <Predicates sleText="source1.mac_addr = source2.mac_addr"/>
            <ProjectionsEditor>
              <ProjectionInfo exclude="false" level="1" name="ts" source="source1.ts"/>
              <ProjectionInfo exclude="false" level="1" name="env" source="source1.env"/>
              <ProjectionInfo exclude="false" level="1" name="mac_addr" source="source1.mac_addr"/>
              <ProjectionInfo exclude="false" level="1" name="status" source="source1.status"/>
              <ProjectionInfo exclude="false" level="1" name="host" source="source1.host"/>
              <ProjectionInfo exclude="false" level="1" name="cmts" source="source1.cmts"/>
              <ProjectionInfo exclude="false" level="1" name="prov_speed" source="source1.prov_speed"/>
              <ProjectionInfo exclude="false" level="1" name="ip_addr" source="source1.ip_addr"/>
              <ProjectionInfo exclude="false" level="1" name="node" source="source1.node"/>
              <ProjectionInfo exclude="false" level="1" name="metric_name" source="source1.metric_name"/>
              <ProjectionInfo exclude="false" level="1" name="metric_value" source="source1.metric_value"/>
              <ProjectionInfo exclude="false" level="1" name="aggr_func" source="source1.aggr_func"/>
              <ProjectionInfo exclude="false" level="1" name="parse_target_app" source="source1.parse_target_app"/>
              <ProjectionInfo exclude="false" level="1" name="parse_target_metric" source="source1.parse_target_metric"/>
              <ProjectionInfo exclude="false" level="1" name="device_type" source="source2.device_type"/>
              <ProjectionInfo exclude="false" level="1" name="firmware_version" source="source2.firmware_version"/>
              <ProjectionInfo exclude="false" level="1" name="manufacturer" source="source2.manufacturer"/>
            </ProjectionsEditor>
            <Projections>
              <Projection label="ts" name="ts" source="source1.ts"/>
              <Projection label="env" name="env" source="source1.env"/>
              <Projection label="mac_addr" name="mac_addr" source="source1.mac_addr"/>
              <Projection label="status" name="status" source="source1.status"/>
              <Projection label="host" name="host" source="source1.host"/>
              <Projection label="cmts" name="cmts" source="source1.cmts"/>
              <Projection label="prov_speed" name="prov_speed" source="source1.prov_speed"/>
              <Projection label="ip_addr" name="ip_addr" source="source1.ip_addr"/>
              <Projection label="node" name="node" source="source1.node"/>
              <Projection label="metric_name" name="metric_name" source="source1.metric_name"/>
              <Projection label="metric_value" name="metric_value" source="source1.metric_value"/>
              <Projection label="aggr_func" name="aggr_func" source="source1.aggr_func"/>
              <Projection label="parse_target_app" name="parse_target_app" source="source1.parse_target_app"/>
              <Projection label="parse_target_metric" name="parse_target_metric" source="source1.parse_target_metric"/>
              <Projection label="device_type" name="device_type" source="source2.device_type"/>
              <Projection label="firmware_version" name="firmware_version" source="source2.firmware_version"/>
              <Projection label="manufacturer" name="manufacturer" source="source2.manufacturer"/>
            </Projections>
          </Model>
        </Node>
        <Link tgtPort="din:0" tgtId="de02fcb5-37db-409e-8061-86b34dab4194" srcPort="dout:0" srcId="ca1449c3-e067-4eb8-8456-20fce30eb6ae"/>
        <Link tgtPort="in:0" tgtId="e868221a-6f4c-4cb2-8e22-64d2766f9dee" srcPort="dout:0" srcId="2de76d39-43d2-45a3-8e28-06a02e3272a7"/>
        <Link tgtPort="din:0" tgtId="ca1449c3-e067-4eb8-8456-20fce30eb6ae" srcPort="dout:0" srcId="e868221a-6f4c-4cb2-8e22-64d2766f9dee"/>
        <Link tgtPort="din:1" tgtId="de02fcb5-37db-409e-8061-86b34dab4194" srcPort="dout:0" srcId="3dbc8762-812a-4b3c-891d-502b98640b60"/>
        <Link tgtPort="din:0" tgtId="896d579d-efc3-4f59-8046-ba4d83e30a58" srcPort="out:0" srcId="fab3627f-d1c5-4d10-8a96-0a435dd85f0d"/>
        <Link tgtPort="din:0" tgtId="73faa65b-1254-4aa6-8e8b-fa5e1c03be81" srcPort="dout:1" srcId="e868221a-6f4c-4cb2-8e22-64d2766f9dee"/>
        <Link tgtPort="din:0" tgtId="2e5a6c0e-1e75-461c-806e-8cc0e29b1959" srcPort="out:0" srcId="de02fcb5-37db-409e-8061-86b34dab4194"/>
        <Link tgtPort="din:1" tgtId="2e5a6c0e-1e75-461c-806e-8cc0e29b1959" srcPort="out:0" srcId="7c3989f6-4cde-452b-89a2-f5928686b067"/>
        <Link tgtPort="in:0" tgtId="fab3627f-d1c5-4d10-8a96-0a435dd85f0d" srcPort="out:0" srcId="2e5a6c0e-1e75-461c-806e-8cc0e29b1959"/>
        <Codes/>
        <Libraries>
          <Lib systemPath="${VTBA_HOME}/wildfly/modules/com/vitria/driver/main/mysql-connector-java-*-bin.jar" scope="system"/>
        </Libraries>
        <Resources/>
        <Properties>[{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;stop_after_batch&quot;,&quot;label&quot;:&quot;Stop After n Microbatch&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:0,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;,&quot;args&quot;:{}}},{&quot;editorType&quot;:&quot;sparkSelect&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;,&quot;options.History&quot;:&quot;constraints.args.options.0.label&quot;,&quot;options.Anomaly&quot;:&quot;constraints.args.options.1.label&quot;,&quot;options.Both&quot;:&quot;constraints.args.options.2.label&quot;},&quot;name&quot;:&quot;operation_mode&quot;,&quot;label&quot;:&quot;Operation Mode&quot;,&quot;desc&quot;:&quot;Controls output target routing to History table and/or Anomaly HDFS Target&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Both&quot;,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;type&quot;:&quot;sparkSelect&quot;,&quot;args&quot;:{&quot;options&quot;:[{&quot;label&quot;:&quot;History&quot;,&quot;value&quot;:&quot;History&quot;},{&quot;label&quot;:&quot;Anomaly&quot;,&quot;value&quot;:&quot;Anomaly&quot;},{&quot;label&quot;:&quot;Both&quot;,&quot;value&quot;:&quot;Both&quot;}],&quot;needPlaceholder&quot;:true,&quot;multiple&quot;:false}}},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;source_group&quot;,&quot;label&quot;:&quot;Source Group&quot;,&quot;desc&quot;:&quot;Source Group of Metrics&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;speed_test_log_source&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;source_group_prefix&quot;,&quot;label&quot;:&quot;Source Group Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;speed_test_log&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;name&quot;:&quot;time_zone&quot;,&quot;label&quot;:&quot;Time Zone&quot;,&quot;desc&quot;:&quot;The timezone to calculate date&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;Etc/GMT&quot;,&quot;defaultValueForExisted&quot;:&quot;Europe/London&quot;,&quot;enumSource&quot;:&quot;rest:/global/?op=get.timezones&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;name&quot;:&quot;file_url&quot;,&quot;label&quot;:&quot;File URL&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;hdfs://master:8020/nuova_stella/source/speed_test_log_source&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;groupLabel&quot;:&quot;Source&quot;},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;file_filter&quot;,&quot;label&quot;:&quot;File Filter&quot;,&quot;desc&quot;:&quot;The file filter regular expression&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;.*_speedtest_log\\.csv&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;max_batch_size&quot;,&quot;label&quot;:&quot;Max Batch Size (MB)&quot;,&quot;desc&quot;:&quot;The max file size which will be processed in one batch&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;0&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;date&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;start_date&quot;,&quot;label&quot;:&quot;Start Date&quot;,&quot;desc&quot;:&quot;The start date constraint and empty means starting from oldest&quot;,&quot;type&quot;:&quot;date&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;itemStyle&quot;:&quot;width: 200px;&quot;,&quot;supportNow&quot;:true,&quot;supportClear&quot;:&quot;true&quot;,&quot;args&quot;:{}}},{&quot;editorType&quot;:&quot;date&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group2&quot;,&quot;groupLabel&quot;:&quot;Source&quot;,&quot;name&quot;:&quot;end_date&quot;,&quot;label&quot;:&quot;End Date&quot;,&quot;desc&quot;:&quot;End date constraint and empty means always process to latest time&quot;,&quot;type&quot;:&quot;date&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;itemStyle&quot;:&quot;width: 200px;&quot;,&quot;supportNow&quot;:true,&quot;supportClear&quot;:&quot;true&quot;,&quot;args&quot;:{}}},{&quot;editorType&quot;:&quot;_dataSourceSelector&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group3&quot;,&quot;groupLabel&quot;:&quot;Metric&quot;,&quot;name&quot;:&quot;data_source&quot;,&quot;label&quot;:&quot;Datasource&quot;,&quot;type&quot;:&quot;object&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:{&quot;dataSource&quot;:&quot;/vitria/m3o/datasource/DefaultDomain/charter_ref_db&quot;},&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;type&quot;:&quot;dataSource&quot;,&quot;args&quot;:{}}},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;name&quot;:&quot;ref_table&quot;,&quot;editorID&quot;:&quot;_tableSelector&quot;,&quot;label&quot;:&quot;System Model Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:&quot;true&quot;,&quot;value&quot;:&quot;viaops_parse_table&quot;,&quot;group&quot;:&quot;group3&quot;,&quot;groupLabel&quot;:&quot;Metric&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group3&quot;,&quot;groupLabel&quot;:&quot;Metric&quot;,&quot;name&quot;:&quot;poll_rate&quot;,&quot;label&quot;:&quot;Poll Rate (Minutes)&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;1&quot;,&quot;defaultValueForExisted&quot;:&quot;1&quot;,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;,&quot;args&quot;:{}}},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group4&quot;,&quot;groupLabel&quot;:&quot;Enrichment&quot;,&quot;name&quot;:&quot;enrichment_datasource&quot;,&quot;label&quot;:&quot;Enrichment Data Source&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;charter_ref_db&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group4&quot;,&quot;groupLabel&quot;:&quot;Enrichment&quot;,&quot;name&quot;:&quot;enrichment_table_name&quot;,&quot;label&quot;:&quot;Enrichment Table Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_parse_model&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;spark_sql_table_url&quot;,&quot;label&quot;:&quot;Spark SQL Table URL&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;hdfs://master:8020/user/vitria/charter_dev/warehouse/speed_test_log_table&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;spark_sql_table&quot;,&quot;label&quot;:&quot;Spark SQL Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;speed_test_log_table&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;anomaly_file_url&quot;,&quot;label&quot;:&quot;Anomaly File URL&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;hdfs://master:8020/nuova_stella/anomaly/speed_test_log_source&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group&quot;,&quot;groupLabel&quot;:&quot;Target&quot;,&quot;name&quot;:&quot;anomaly_file_name_prefix&quot;,&quot;label&quot;:&quot;Anomaly File Name Prefix&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:&quot;true&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;speed_test_log&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group1&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;agg_dropped_events&quot;,&quot;label&quot;:&quot;Dropped Events Table&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser_dropped&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;boolean&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group1&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;enableAudit&quot;,&quot;label&quot;:&quot;Audit Log&quot;,&quot;desc&quot;:&quot;A flag to control whether enable audit log&quot;,&quot;type&quot;:&quot;boolean&quot;,&quot;optional&quot;:false,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;true&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;textInput&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group1&quot;,&quot;groupLabel&quot;:&quot;Audit&quot;,&quot;name&quot;:&quot;auditUrl&quot;,&quot;label&quot;:&quot;Audit Log Table&quot;,&quot;desc&quot;:&quot;The audit table name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;optional&quot;:true,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:&quot;viaops_audit_parser&quot;,&quot;enumSource&quot;:&quot;&quot;,&quot;runtimeControl&quot;:false},{&quot;editorType&quot;:&quot;number&quot;,&quot;*&quot;:{&quot;label&quot;:&quot;label&quot;,&quot;desc&quot;:&quot;desc&quot;},&quot;group&quot;:&quot;group4&quot;,&quot;name&quot;:&quot;enrichment_poll_rate&quot;,&quot;label&quot;:&quot;Enrichment Poll Rate (minutes)&quot;,&quot;type&quot;:&quot;integer&quot;,&quot;hidden&quot;:&quot;false&quot;,&quot;disabled&quot;:false,&quot;resolveProperty&quot;:false,&quot;value&quot;:1,&quot;runtimeControl&quot;:false,&quot;constraints&quot;:{&quot;min&quot;:&quot;0&quot;,&quot;max&quot;:&quot;999999&quot;,&quot;step&quot;:&quot;1&quot;,&quot;places&quot;:&quot;&quot;,&quot;maxLength&quot;:&quot;&quot;,&quot;args&quot;:{}}}]</Properties>
        <Types>[{&quot;name&quot;:&quot;Output&quot;,&quot;namespace&quot;:&quot;&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;aggr_start_tm&quot;,&quot;label&quot;:&quot;Aggregation Start Timestamp&quot;,&quot;type&quot;:&quot;long&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;aggr_end_tm&quot;,&quot;label&quot;:&quot;Aggregation End Timestamp&quot;,&quot;type&quot;:&quot;long&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;app&quot;,&quot;label&quot;:&quot;Component&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;ts_key&quot;,&quot;label&quot;:&quot;Timestamp Key&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;ts_value&quot;,&quot;label&quot;:&quot;Timestamp Value&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;system_tm&quot;,&quot;label&quot;:&quot;System Timestamp&quot;,&quot;type&quot;:&quot;long&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;process_type&quot;,&quot;label&quot;:&quot;Process Type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;aggr_type&quot;,&quot;label&quot;:&quot;Aggregation Function&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;source_fmt&quot;,&quot;label&quot;:&quot;Source Format&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;source_tz&quot;,&quot;label&quot;:&quot;Source Timezone&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;date_key&quot;,&quot;label&quot;:&quot;Date Key&quot;,&quot;type&quot;:&quot;long&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;metric_name&quot;,&quot;label&quot;:&quot;Metric Name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;label&quot;:&quot;Metric Value&quot;,&quot;type&quot;:&quot;double&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;metric_uom&quot;,&quot;label&quot;:&quot;Unit of Measure&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;env&quot;,&quot;label&quot;:&quot;Env&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;mac_addr&quot;,&quot;label&quot;:&quot;mac_addr&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;status&quot;,&quot;label&quot;:&quot;Status&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;host&quot;,&quot;label&quot;:&quot;Host&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;cmts&quot;,&quot;label&quot;:&quot;Cmts&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;prov_speed&quot;,&quot;label&quot;:&quot;Prov_speed&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;ip_addr&quot;,&quot;label&quot;:&quot;Ip_addr&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;node&quot;,&quot;label&quot;:&quot;Node&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;device_type&quot;,&quot;label&quot;:&quot;device_type&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;firmware_version&quot;,&quot;label&quot;:&quot;firmware_version&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;manufacturer&quot;,&quot;label&quot;:&quot;manufacturer&quot;,&quot;type&quot;:&quot;string&quot;,&quot;clazz&quot;:&quot;&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false}]},{&quot;name&quot;:&quot;Pivot&quot;,&quot;namespace&quot;:&quot;&quot;,&quot;schema&quot;:[{&quot;name&quot;:&quot;ts&quot;,&quot;type&quot;:&quot;datetime&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;env&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:true},{&quot;name&quot;:&quot;mac_addr&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;status&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;host&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;cmts&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:true},{&quot;name&quot;:&quot;prov_speed&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:true},{&quot;name&quot;:&quot;ip_addr&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:true},{&quot;name&quot;:&quot;node&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:true},{&quot;name&quot;:&quot;metric_name&quot;,&quot;type&quot;:&quot;string&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false},{&quot;name&quot;:&quot;metric_value&quot;,&quot;type&quot;:&quot;long&quot;,&quot;_isArray&quot;:false,&quot;_isOptional&quot;:false}]}]</Types>
      </Flow>
    </Flows>
  </ModelInfo>
</DataPipeModel>
